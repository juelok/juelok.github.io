
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="title" content="Sitechco.ru" />
<meta name="description" content="Sitechco.ru" />
<meta name="keywords" content="Sitechco.ru" />
<meta name="language" content="ru" />
<meta name="robots" content="index, follow" />
    <title>Sitechco.ru</title>
        <link rel="stylesheet" href="/css/jquery-ui.css" />
    <link rel="stylesheet" href="/css/style.css?1626779595"/>
        <link rel="shortcut icon" href="/img/favicon/32x32/favicon.ico" type="image/x-icon" />

    <link rel="stylesheet" href="/css/ui-lightness/jquery-ui-1.8.17.custom.css"/>
    
    <link rel="stylesheet" href="/css/jquery.msgbox.css"/>
    <link rel="stylesheet" href="/css/jquery.simpletip.css"/>
    <link rel="stylesheet" href="/css/jquery.alerts.css"/>


    <!--[if IE]><link rel="stylesheet" href="/css/ie.css" type="text/css" media="all" /><![endif]-->
    
    <!--<script type="text/javascript" src="/js/jquery-1.7.1.js"></script>-->
    <script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
	 
    <script type="text/javascript" src="/js/logging.js?1626779595"></script>
	    <script type="text/javascript" src="/js/jquery.msgbox.js"></script>
    <script type="text/javascript" src="/js/jquery.simpletip.js"></script>
    <!--<script type="text/javascript" src="/js/jquery.alerts.js"></script>-->
    <script type="text/javascript">
// jQuery Alert Dialogs Plugin
// License:
// 
//		This plugin is licensed under the GNU General Public License: http://www.gnu.org/licenses/gpl.html
//
(function($) {
	
	$.alerts = {
		
		// These properties can be read/written by accessing $.alerts.propertyName from your scripts at any time
		
		verticalOffset: -75,                // vertical offset of the dialog from center screen, in pixels
		horizontalOffset: 0,                // horizontal offset of the dialog from center screen, in pixels/
		repositionOnResize: true,           // re-centers the dialog on window resize
		overlayOpacity: .01,                // transparency level of overlay
		overlayColor: '#FFF',               // base color of overlay
		draggable: true,                    // make the dialogs draggable (requires UI Draggables plugin)
		okButton: '&nbsp;OK&nbsp;',         // text for the OK button
		cancelButton: 'Отмена', // text for the Cancel button
		dialogClass: null,                  // if specified, this class will be applied to all dialogs
		
		// Public methods
		
		alert: function(message, title, callback, okButton) {
			if( title == null ) title = 'Alert';
			$.alerts._show(title, message, null, 'alert', function(result) {
				if( callback ) callback(result);
			}, okButton);
		},

        error: function(message, title, callback) {
            if( title == null ) title = 'Error';
            $.alerts._show(title, message, null, 'error', function(result) {
                if( callback ) callback(result);
            });
        },

		confirm: function(message, title, callback, okButton, cancelButton) {
			if( title == null ) title = 'Confirm';
			$.alerts._show(title, message, null, 'confirm', function(result) {
				if( callback ) callback(result);
			}, okButton, cancelButton);
		},
			
		prompt: function(message, value, title, callback) {
			if( title == null ) title = 'Prompt';
			$.alerts._show(title, message, value, 'prompt', function(result) {
				if( callback ) callback(result);
			});
		},
		
		// Private methods
		
		_show: function(title, msg, value, type, callback, okButtonCustom, cancelButtonCustom) {

			if( okButtonCustom == null ) okButtonCustom = $.alerts.okButton;
			if( cancelButtonCustom == null ) cancelButtonCustom = $.alerts.cancelButton;
			
			$.alerts._hide();
			$.alerts._overlay('show');
			
			$("BODY").append(
			  '<div id="popup_container">' +
			    '<h1 id="popup_title"></h1>' +
			    '<div id="popup_content">' +
			      '<div id="popup_message"></div>' +
				'</div>' +
			  '</div>');
			
			if( $.alerts.dialogClass ) $("#popup_container").addClass($.alerts.dialogClass);
			
			// IE6 Fix
			var pos = ($.browser.msie && parseInt($.browser.version) <= 6 ) ? 'absolute' : 'fixed'; 
			
			$("#popup_container").css({
				position: pos,
				zIndex: 99999,
				padding: 0,
				margin: 0
			});
			
			$("#popup_title").text(title);
			$("#popup_content").addClass(type);
			$("#popup_message").text(msg);
			$("#popup_message").html( $("#popup_message").text().replace(/\n/g, '<br />') );
			
			$("#popup_container").css({
				minWidth: $("#popup_container").outerWidth(),
				maxWidth: $("#popup_container").outerWidth()
			});
			
			$.alerts._reposition();
			$.alerts._maintainPosition(true);
			
			switch( type ) {
				case 'alert':
					$("#popup_message").after('<div id="popup_panel"><input type="button" value="' + okButtonCustom + '" id="popup_ok" class="btn blue" /></div>');
					$("#popup_ok").click( function() {
						$.alerts._hide();
						callback(true);
					});
					$("#popup_ok").focus().keypress( function(e) {
						if( e.keyCode == 13 || e.keyCode == 27 ) $("#popup_ok").trigger('click');
					});
				break;
                case 'error':
                    $("#popup_message").after('<div id="popup_panel"><input type="button" value="' + $.alerts.okButton + '" id="popup_ok" class="btn blue" /></div>');
                    $("#popup_ok").click( function() {
                        $.alerts._hide();
                        callback(true);
                    });
                break;
				case 'confirm':
					$("#popup_message").after('<div id="popup_panel"><input type="button" value="' + okButtonCustom + '" id="popup_ok" class="btn blue" /> <input type="button" value="' + cancelButtonCustom + '" id="popup_cancel" class="btn gray" /></div>');
					$("#popup_ok").click( function() {
						$.alerts._hide();
						if( callback ) callback(true);
					});
					$("#popup_cancel").click( function() {
						$.alerts._hide();
						if( callback ) callback(false);
					});
					$("#popup_ok").focus();
					$("#popup_ok, #popup_cancel").keypress( function(e) {
						if( e.keyCode == 13 ) $("#popup_ok").trigger('click');
						if( e.keyCode == 27 ) $("#popup_cancel").trigger('click');
					});
				break;
				case 'prompt':
					$("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><input type="button" value="' + $.alerts.okButton + '" id="popup_ok" class="btn blue" /> <input type="button" value="' + $.alerts.cancelButton + '" id="popup_cancel" class="btn gray" /></div>');
					$("#popup_prompt").width( $("#popup_message").width() );
					$("#popup_ok").click( function() {
						var val = $("#popup_prompt").val();
						$.alerts._hide();
						if( callback ) callback( val );
					});
					$("#popup_cancel").click( function() {
						$.alerts._hide();
						if( callback ) callback( null );
					});
					$("#popup_prompt, #popup_ok, #popup_cancel").keypress( function(e) {
						if( e.keyCode == 13 ) $("#popup_ok").trigger('click');
						if( e.keyCode == 27 ) $("#popup_cancel").trigger('click');
					});
					if( value ) $("#popup_prompt").val(value);
					$("#popup_prompt").focus().select();
				break;
			}
			
			// Make draggable
			if( $.alerts.draggable ) {
				try {
					$("#popup_container").draggable({ handle: $("#popup_title") });
					$("#popup_title").css({ cursor: 'move' });
				} catch(e) { /* requires jQuery UI draggables */ }
			}
		},
		
		_hide: function() {
			$("#popup_container").remove();
			$.alerts._overlay('hide');
			$.alerts._maintainPosition(false);
		},
		
		_overlay: function(status) {
			switch( status ) {
				case 'show':
					$.alerts._overlay('hide');
					$("BODY").append('<div id="popup_overlay"></div>');
					$("#popup_overlay").css({
						position: 'absolute',
						zIndex: 99998,
						top: '0px',
						left: '0px',
						width: '100%',
						height: $(document).height(),
						background: $.alerts.overlayColor,
						opacity: $.alerts.overlayOpacity
					});
				break;
				case 'hide':
					$("#popup_overlay").remove();
				break;
			}
		},
		
		_reposition: function() {
			var top = (($(window).height() / 2) - ($("#popup_container").outerHeight() / 2)) + $.alerts.verticalOffset;
			var left = (($(window).width() / 2) - ($("#popup_container").outerWidth() / 2)) + $.alerts.horizontalOffset;
			if( top < 0 ) top = 0;
			if( left < 0 ) left = 0;
			
			// IE6 fix
			if( $.browser.msie && parseInt($.browser.version) <= 6 ) top = top + $(window).scrollTop();
			
			$("#popup_container").css({
				top: top + 'px',
				left: left + 'px'
			});
			$("#popup_overlay").height( $(document).height() );
		},
		
		_maintainPosition: function(status) {
			if( $.alerts.repositionOnResize ) {
				switch(status) {
					case true:
						$(window).bind('resize', function() {
							$.alerts._reposition();
						});
					break;
					case false:
						$(window).unbind('resize');
					break;
				}
			}
		}
		
	}
	
	// Shortuct functions
	jAlert = function(message, title, callback) {
		$.alerts.alert(message, title, callback);
	}

    jError = function(message, title, callback) {
        $.alerts.error(message, title, callback);
    }
	
	jConfirm = function(message, title, callback) {
		$.alerts.confirm(message, title, callback);
	};
		
	jPrompt = function(message, value, title, callback) {
		$.alerts.prompt(message, value, title, callback);
	};
		
	jConfirmCustom = function(message, title, callback, okButton, cancelButton) {
		$.alerts.confirm(message, title, callback, okButton, cancelButton);
	};
		
	jAlertCustom = function(message, title, callback, okButton) {
		$.alerts.alert(message, title, callback, okButton);
	}
	
})(jQuery);
</script>
    <script type="text/javascript" src="/js/min-max-float-menu.js"></script>
    
        
        
            <script type="text/javascript" src="/js/search.js"></script>
    
         <script type="text/javascript" src="/js/DataTables-1.9.0/media/js/jquery.dataTables.min.js"></script>
         
    
     <script type="text/javascript" src="/js/jquery-ui-1.8.17.custom/js/jquery-ui-1.8.17.custom.min.js"></script>     
     
    <script type="text/javascript" src="/js/jquery-ui-1.8.17.custom/js/jquery.ui.datepicker-ru.js"></script>

    <script type="text/javascript" src="/js/error-report-mover.js"></script>
   
    <script type="text/javascript" src="/js/jquery.cookie.js"></script>
    
        <link rel="stylesheet" href="/js/DataTables-1.9.0/media/css/jquery.dataTables_themeroller.css"/>
    
    <!-- test -->
    <script type="text/javascript" src="/js/jquery.contextmenu.r2.packed.js"></script>
<script type="text/javascript" src="/js/result.js"></script>

</head>
 
<body>
    <script type="text/javascript">


$('#send_bug_button').live('click',function() {
    $.ajax({
        type: "POST",
        dataType: "json",
        global: false,
        url: '/addbug',
        data: { 
            type_id:     $('#bug_type_id').val(), 
            description: $('#bug_description').val(), 
            email:       $('#bug_email').val(),
            project_id:  22481, // #5565
            user_id:     28026,
            url:         location.href
        },
        beforeSend: function(){
        },
        success: function(response) {
            if ( response.status == 'success' ){
                $('#report-window-dialog').fadeOut(100);
                $.msgbox({text:'<b>Уведомление</b><br />'+response.message,className:'notice'});
                $('#bug_type_id').val(1);
                $('#bug_description').val('');
                $('#bug_email').val('');
            }else{
                 $.msgbox({text:'<b>Ошибка</b><br />'+response.message,className:'error'});
            }
        }
    });
});

function initCountSymbol(ids){
    
    $.each(ids, function(index, id){
        $('#'+id+'-countSymbol').remove();
        
        input = $('#'+id);
        maxlength = input.attr('maxlength');
        
        html = '';
                
        if (input.val() && maxlength !== 'undefined'){
            var x = input.val();
            var newLines = x.match(/(\r\n|\n|\r)/g);
            var addition = 0;
            if (newLines != null) addition = newLines.length;
            var usedLength = x.length + addition;
            
            maxlength -= usedLength;
            maxlength = maxlength < 0 ? 0 : maxlength;
        }
        
                if (maxlength !== 'undefined')
            html = '<div id="'+id+'-countSymbol" class="small-label" style="opacity: 0; color: #C44949; padding-left: 2px;">осталось: '+getCase(maxlength, 'символ') +'</div>'
                
        input.after(html);
        
        $('#' + id).focus(function() {
            $('#' + id+'-countSymbol').fadeTo(300, 1);
        });

        $('#' + id).blur(function() {
            $('#' + id+'-countSymbol').fadeTo(100, 0);
        });

        $('#'+id).on('keydown keyup change focus blur', function(e){
            var x = $(this).val();
            var newLines = x.match(/(\r\n|\n|\r)/g);
            var addition = 0;
            if (newLines != null) addition = newLines.length;
            var usedLength = x.length + addition;
            var maxlength = $(this).attr('maxlength');
            var charsLeft = maxlength - usedLength;
            
            charsLeft = charsLeft < 0 ? 0 : charsLeft;
            
                         if (maxlength)
                $('#'+id+'-countSymbol').text('осталось: '+ getCase(charsLeft, 'символ'));
                        
            
        });
    });
}

function getCase(count,word){  
  if ( count>4 && count<21 ){
    return count + ' ' + word + 'ов';
  }

  if (count) {
      count_string = count.toString();
      switch(count_string[count_string.length-1]){
          case '1': return count + ' ' + word;
          case '2': {}
          case '3': {}
          case '4': {
              if (count_string[count_string.length-2]!='1')
                  return count + ' ' + word + 'a';
          }
          default: {return count + ' ' + word + 'ов';}
      }
  }else if (count == 0){
    return count + ' ' + word + 'ов';
  }
}

function setLang(lang){
  $.ajax({
    type: "POST",
    dataType: 'JSON',
    url: '/language',
    data: { 
        language: lang
    },
    beforeSend: function(){
    },
    success: function(response) {
      if ( response.status == 'success' ){
        //$.msgbox({text:'<b>Уведомление</b><br />'+response.message,className:'notice'});
        location.reload();
      }else{
        $.msgbox({text:'<b>Ошибка</b><br />'+response.message,className:'error'});
      }
    }
  });
}

function minFloatMenu() {
    $('#min-max-float-menu').text('Развернуть меню');
    $('#floatmenu ul').removeClass('max').addClass('min');
    $('#main').css('margin', ($('#main-header').height() - 1) + 'px auto 0');
    $.cookie('minmaxmenu', 'min', { expires: 360, path: '/' });
}

function maxFloatMenu() {
    $('#min-max-float-menu').text('Свернуть меню');
    $('#floatmenu ul').removeClass('min').addClass('max');
    $('#main').css('margin', ($('#main-header').height() - 1) + 'px auto 0');
    $.cookie('minmaxmenu', 'max', { expires: 360, path: '/' });
}

 // Для обрезки option в селектах
function cutSelectOptions(selector, length) {
    $(selector + ' > option').each(function(){ 
        var str = $(this).text();
        
        if(str.length > length) {
            str = str.substr(0, length) + '...';
            $(this).text(str);            
        }
    });
}

console.log('ru_RU')
function setGroupHeaderToggle() {
    $('.group:not(.node) .header').click(function() {
        var header = $(this);	
        var testList = header.parent().find('.test-list');

        if(testList.is(':visible')) {
            testList.css('display', 'none');
            header.addClass('rounded').attr('title', 'Развернуть группу');
            header.find('.is-minimized').text('Группа свернута');
        } else {
            testList.css('display', 'block');
            header.removeClass('rounded').attr('title', 'Свернуть группу');
            header.find('.is-minimized').empty();
        }
    }).css('cursor', 'pointer').attr('title', 'Свернуть группу');

    $('.group.node .header').click(function() {
        var header = $(this);
        var node = header.parent('.group.node');

        var css = 'none';
        if(header.hasClass('minimized')) {
            css = 'block';
            header.removeClass('minimized').attr('title', 'Свернуть мастер-группу');
            header.find('.is-minimized').empty();
        } else {
            css = 'none';
            header.addClass('minimized').attr('title', 'Развернуть мастер-группу');
            header.find('.is-minimized').text('Мастер-группа свернута');
        }

        var item = node.next('.group.sub');
        while(item.hasClass('sub')) {
            item.css('display', css);
            item = item.next('.group.sub');
        }

    }).css('cursor', 'pointer').attr('title', 'Свернуть мастер-группу');
};

function hideAllTestList() {
    $('.group:not(.node) .header').each(function() {
        var header = $(this);	
        var testList = $(this).parent().find('.test-list')
        testList.css('display', 'none');
        header.addClass('rounded').attr('title', 'Развернуть группу');
        header.find('.is-minimized').text('Группа свернута');
    });
    
    $('.group.node .header').each(function() {
        var header = $(this);
        var node = header.parent('.group.node');
        
        var item = node.next('.group.sub');
        while(item.hasClass('sub')) {
            item.css('display', 'none');
            item = item.next('.group.sub');
        }
        
        header.addClass('minimized').attr('title', 'Развернуть мастер-группу');
        header.find('.is-minimized').text('Мастер-группа свернута');
    });
};

function showAllTestList() {
    $('.group:not(.node) .header').each(function() {
        var header = $(this);	
        var testList = $(this).parent().find('.test-list')
        testList.css('display', 'block');
        header.removeClass('rounded').attr('title', 'Свернуть группу');
        header.find('.is-minimized').empty();
    });
    
    $('.group.node .header').each(function() {
        var header = $(this);
        var node = header.parent('.group.node');
        
        var item = node.next('.group.sub');
        while(item.hasClass('sub')) {
            item.css('display', 'block');
            item = item.next('.group.sub');
        }
        
        header.removeClass('minimized').attr('title', 'Свернуть мастер-группу');
        header.find('.is-minimized').empty();
    });
};  
</script>    
<div id="black_popup" style="display: none; border-radius: 5px; background-color: black; opacity: 0.8; color: white; padding: 10px; font-size: 14px; z-index: 1000; position: absolute; width: 400px;">
    <b id="_proverka">Проверка: </b><a href="#" onclick="$('#black_popup').hide()" style="float: right; font-weight: bold;">X</a><span id="_proverka_text"> </span><br>
    <b id="_result">Результат: </b><span id="_result_text"> </span> <br>
    <b id="_tags">Теги: </b><span id="_tags_text"> </span> <br>
    <a id="_link_" href="?" onclick="$('#black_popup').hide()" target="blank" style="float: right;">Перейти к тесту</a>
</div>

<!--upbutton-->
<div class="leftbar-wrap">
	<a href="#0" id="scroll-back">
		<span class="active-area">
			<span class="bar-desc"></span>
		</span>
	</a>
	<a href="#" id="left-controlbar">
		<span class="active-area">
			<span class="bar-desc">Наверх</span>
		</span>
	</a>
</div>
<script>
	function initSideControls() {
		var control_min_width = $('.active-area').width();
		var content_width = $('#main').width();
		var window_width = $(window).width();
		var $bar_wrap = $('.leftbar-wrap');
		var $bar = $bar_wrap.find('#left-controlbar');
		var $scroll_back = $('#scroll-back');
		var prev_top = parseInt($scroll_back.attr('href').substr(1));

		if(window_width - content_width - (2*control_min_width) > 0) {
			$bar_wrap.css('display', 'block');
			$bar.show();

			var bar_width = (window_width - content_width) / 2;

			$bar_wrap.css({width: bar_width});

			if(!prev_top ) $scroll_back.hide();

			$bar.off('click').on('click', function(e) {
				e.preventDefault();
				prev_top = $(window).scrollTop();
				if(!prev_top) return false;
				$('html, body').animate({scrollTop: 0}, 'normal', function() {
					$scroll_back.attr('href', '#' + prev_top).css({display: 'block', opacity: 0}).animate({opacity: 1}, 'fast');
				});
			});
		} else {
			$bar.hide();
			$bar_wrap.css('display', 'none');
		}
	}
</script>
<!--\upbutton-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23069285-4']);
  _gaq.push(['_setDomainName', '.sitechco.ru']);
  _gaq.push(['_setAllowHash', false]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>                <div id="error_report">
        <div id="rw_popup"><img src="/img/rw_popup_rus.png" /></div>
        <div id="rw_bug"><img src="/img/rw_bug.png" /></div>
    </div>
    <div id="report-window-dialog" class="popup-overlay" style="display:none;" >
        <div class="popup">
                <div class="popup-header">
                    <img height="16" width="16" src="/img/icons/mail--arrow.png" />
                    <span>Отправка сообщения</span>
                </div>
                <div class="popup-content"> 
                    <div class="popup-row">
                        <div>
                            <div class="small-label">Тема письма</div>
                            <select id="bug_type_id" style="width: auto;" class="round-border">
                                <option value="1">Сообщить о баге</option>
                                <option value="2">Предложить идею</option>
                                <option value="3">Задать вопрос</option>
                            </select>
                        </div>
                    </div>
                    <div class="popup-row">
                        <div>
                            <div class="small-label">Текст сообщения</div>
                            <div><textarea id="bug_description" class="round-border" placeholder="Введите текст сообщения"></textarea></div>
                        </div>
                    </div>
                    <div class="popup-row">
                        <div>
                            <div class="small-label">Контактный email</div>
                            <div><input id="bug_email" style="width: 300px;" class="round-border" type="text" placeholder="E-mail" /></div>
                        </div>
                    </div>
                    <div class="popup-row">
                        <div style="margin-top: 20px;">
                            <div class="inline top"><input id="send_bug_button" class="btn blue" type="button" value="Отправить" /></div>
                            <div class="inline top"><input class="btn gray" type="button" value="Отмена" onclick="$('#report-window-dialog').fadeOut(100);" /></div>
                        </div>
                    </div>
                </div>
        </div>
    </div>   
    <header id="main-header">
        <div id="navi" class="black">
            <a href="https://sitechco.ru"><div id="mainlogo" class="inline top"></div></a>
            <ul id="topmenu">
                <a href="/"><li>На главную</li></a>                <a href="/project"><li>Проекты</li></a>                <a href="/project/22481/edit"><li>Настройки</li></a>                <a href="/help"><li>Справка</li></a>            </ul>
                        <div style="float: right; margin-top: 3px;">
                <span id="avatar">
					<span>
						<img src="https://www.gravatar.com/avatar/c449725589c5485c03da4a1e9bf0e65a?s=80&rating=PG&default=wavatar" width="30" height="30" style="border-radius: 4px;"/>
					</span> 				</span>
                                <a id="username" href="/profile">Юлия</a>                <!--
                <span title="Настройки профиля" id="gear" onClick="document.location='https://chlist.sitechco.ru/profile'"></span>-->
                <span title="Выйти" id="quit" onClick="document.location='/logout'"><img height="30" width="30" src="/img/power_blue.png"/></span>
            </div>
                    </div>
                        <div id="floatmenu">
                        <ul class="max">
                                <li ><a href="/project/22481/dashbord"><img alt="" src="/img/floatmenu/ico_1.png" /><span>Дашборд</span></a>
                </li><li ><a href="/project/22481/checklist"><img alt="" src="/img/floatmenu/ico_2.png" /><span>Чек-листы</span></a>                </li><li ><a href="/project/22481/stats/squares"><img alt="" src="/img/floatmenu/ico_3.png" /><span>Отчеты</span></a>                </li><li class="active"><a href="/project/22481/requirement"><img alt="" src="/img/floatmenu/ico_4.png" /><span>Требования</span></a>                </li><li ><a href="/project/22481/testplan"><img alt="" src="/img/floatmenu/ico_5.png" /><span>Тест-план</span></a>
                </li><li ><a href="/project/22481/task?all"><img alt="" src="/img/floatmenu/ico_6.png" /><span>Задачи</span><span class="user-task-count"></span></a></li>            </ul>
            <div class="small-label inline" id="min-max-float-menu">Свернуть меню</div>
        </div>
                                                                                                <div id="status-panel">
            <span><a class="bc" href="/project/22481/checklist">omni</a> > Требования</span>
        </div>
        <div id="controlpanel">
            <span id="controlmenu">      
                <span class="btn icn blue tooltip addreq"><em><span>Новое требование</span></em><div class="icon-bg icon-plus"></div></span>
                <span class="btn icn blue tooltip adddir"><em><span>Новая папка</span></em><div class="icon-bg icon-add-folder"></div></span>
                <span id="span_edit_buttom" class="btn icn blue tooltip"><em><span>Редактировать</span></em><div class="icon-bg icon-edit-cl"></div></span>        
                <span id="delete_requirement" class="btn icn blue tooltip"><em><span>Удалить</span></em><div class="icon-bg icon-delete"></div></span>
                <span id="import_requirement" class="btn icn blue tooltip"><em><span>Импортировать</span></em><div class="icon-bg icon-import"></div></span>
                <span id="projectselect"><style>
#projectselect {
	margin-top: -28px;
}

#controlpanel {
	    height: 34px;
}

#current_project {
	margin-left: 11px;
}
</style>
	<div id="status-panel" style="height: 20px;">
		<div style="" class="inline top" style="float: right;">
		<input id="search-input" type="text" placeholder="Поиск по проекту..." style="padding: 4px 6px; width: 230px; margin-right: 6px;"
			/>
		</div>
</div>

  <select name="current_project" id="current_project" style="width: 244px;">
	  
        <option value="/project/22481" selected="selected">omni</option>
        <option value="/project/18583" >Ecosystem</option>
        <option value="/project/14251" >ClientCentr</option>
      </select>

<script type="text/javascript">
$(document).ready(function(){
  $('#current_project').bind('change', function() {
    var url = $('#current_project option:selected').val();

    if (url == '') {
      url = '/project/checklist';
    }

    window.location.href = url;
  });
});
</script>

<script>
        $(function() {     
            var leftOffset = parseInt($("header#main-header").css('left'));
            $(window).bind('scroll resize', function(){
                $('header#main-header').css({
                    'left': -$(this).scrollLeft()
                });
            });
          
            var searchInput = $('#search-input');
            var searchText = $('#search-text');
            
            searchInput.on('keyup change', function() {
                if(searchInput.val() == '')
                    searchText.empty();
                else
                    searchText.text('"' + searchInput.val() + '"');
            });            
        });
        
        $('#search-input').keypress(function(event){
          var query = $(this).val();
          
          var KEY_ENTER = 13;
          
          if (event.keyCode == KEY_ENTER){
			  /*window.location.href = '/search/project?query=' + query
												+ '&project=' + '22481'
												   + '&page=' + 1;*/
			  request = $.ajax({
              url:  '/search/project',
              data: {
						'query':query,
						'project':'22481',
						'page':1
						},
			  });
            
              request.done(function(response){
				try
              {
                 var json = JSON.parse(response);
                 $.msgbox({text:'<b>Ошибка</b><br />'+json.message,className:'error'});
                 $('#search-input').val('');
              }
              catch(e)
              {
                /*$('div#main').html('');
                $('div#main').html(response);
                $('div#main i b').css('color','#34ABD6');
                $.msgbox({text:'<b>Уведомление</b><br /> Результаты поиска успешно отображены.',className:'success'});
                */
                window.location.href = '/search/project?query=' + query
												+ '&project=' + '22481';
												  // + '&page=' + 1;
              }
            }); 
          }
        });
</script>
</span>
            </span>
       </div>
       <div id="cl-header">
            <div class="cl">
                <span class="cb"></span>
                <span class="abbr">ID</span>
                <span class="name">Название</span>
                <span style="width: 375px;" class="descr">Описание</span>
                <span class="prgrs">Приоритет</span>
                <span class="cnt" title="Количество тестов"><img height="16" width="16" src="/img/documents-stack.png"></span>
           </div>
        </div>
                                                                                                        	        	                                                                                                  
                                                        </header>
            <style>
div.new { background-color: beige; }
.tree-children{ cursor:pointer; }
span.name a.help{ text-decoration: underline; }
input[type=radio] { margin: -2px 0 0 4px; }
span.convertToReq{
    text-decoration: underline;
    cursor:pointer;
}

div.cl .descr { width: 36% !important; }
div.cl .cnt {
    width: 65px !important;
    text-align: right !important;
}

#main { margin: 256px auto 0 }</style>

<script type="text/javascript" src="/js/script.js"></script>
<script type="text/javascript" src="/js/jquery.ui.nestedSortable.js"></script>
<div id="main">
    
       <div class="folder root" id="0">
        <div class="header no-bb chcklsts-btn active">
            <input id="global_ch" class="checkbox" type="checkbox" />
            <span class=""><span title="" class="icon"></span></span>
            <span class="name nwrp">Требования</span>
            <span class="more"><img class="arrow" alt="" src="/img/arrow.png" /></span>
            <span class="items">
                                <span class="popup-toggle itm addreq">Новое требование</span>
                <span class="popup-toggle itm importreq">Импортировать требования</span>
                <span class="popup-toggle itm adddir">Создать подпапку</span>
                            </span>
        </div>
        
        <ol class="sortable list">
            
                            <li class="drag s-folder" folder="true" id="32816" parent="0">
                    <input class="ds" type="hidden" name="sort[32816]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32816" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Другое">Другое</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32815" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32815]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32815" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32815</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32815/show">	<p>Инструкция КЦ от ИЛЬИ</p>

</a></span>
                            <span class="descr" title=""> <a href="https://docs.google.com/document/d/1MT5GC1h8kgj-_INZHczp1Q3XJ8lnIeQhou_lZc7xVUQ/edit?usp=sharing" target=_blank>https://docs.google.com/document/d/1MT5GC1h8kgj-_INZHczp1Q3XJ8lnIeQhou_lZc7xVUQ/edit?usp=sharing</a>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32304" parent="0">
                    <input class="ds" type="hidden" name="sort[32304]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32304" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Мои диалоги">Мои диалоги</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-folder" folder="true" id="32905" parent="32304">
                    <input class="ds" type="hidden" name="sort[32905]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32905" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Диалог телефонии">Диалог телефонии</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32906" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32906]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32906" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32906</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32906/show">	<p>Появление или неотображение звонка</p>

</a></span>
                            <span class="descr" title="">	<p>Возврат тел. диалога из Отложено, входящий звонок при наличии тел. диалога или разговора</p>

	<h3>Телефонный звонок не отображается </h3>

	<p><b>Ситуация 1.</b> Если есть диалог по каналу телефонии (в разговоре или просто неактивный) или идет разговор в диалоге чата/мессенджера, то при поступлении нового звонка, оператор его не видит (во вкладке Новые не отображается) и кнопка Принять/Отклонить не появляется.</p>

	<h4>Телефонный звонок может появиться с другим телефонным звонком (вкладка Отложено)</h4>

	<p><strong>Ситуация 1. (развитие)</strong> Если отложить текущий телефонный диалог на <cite>n</cite> минут, то новый звонок появляется в системе (принцип: один звонок В работе сохраняется), но, спустя <cite>n</cite> минут, даже при активном звонке, возвращается первый телефонный диалог из Отложены. Таким образом, может быть несколько телефонных диалогов В работе, но <strong>разговор может быть только у одного</strong>.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32999" parent="32304">
                    <input class="ds" type="hidden" name="sort[32999]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32999" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Создать задачу">Создать задачу</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="33000" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[33000]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="33000" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">33000</span>
                            <span class="name" title=""><a href="/project/22481/requirement/33000/show">	<p>ТЗ ОЛИ</p>

</a></span>
                            <span class="descr" title="">	<p>Категории: неотработка покупатель, неотработка продавец, Перевод без претензии, Прозвоны.</p>

	<p>Поля:</p>

	<p>Неотработка покупатель/продавец:</p>

    Номер заявки на покупку/продажу (автомат)
    Фио менеджера (автомат)
    Фио риэлтора (автомат)
    Фио клиента (автомат с возможностью ручного ввода)
    Причина неотработки (выбор из списка)
    Комментарий (поле для свободного ввода)

	<p>Перевод без претензии:</p>

    Номер заявки на покупку/продажу (автомат)
    Фио менеджера 1 (автомат)
    Фио риэлтора чей объект/заявка (автомат)
    Фио риэлтора кому переводят (выбор из списка)
    Фио менеджера 2 (автомат)
    Фио клиента (автомат с возможностью ручного ввода)
    Телефон клиента
    Причина перевода (выбор из списка)
    Комментарий (поле для свободного ввода)

	<p>Везде прикрепляется запись разговора.</p>

	<p>Приоритет всегда Высокий.<br />
____<br />
Сохранение формы<br />
Перспектива сохранения в базе<br />
Сохранение номера заявки (если есть)</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32910" parent="32304">
                    <input class="ds" type="hidden" name="sort[32910]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32910" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Наличие иконки трубки">Наличие иконки трубки</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32837" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32837]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32837" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32837</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32837/show">	<p>Селект &#8211; выбор номера телефона</p>

</a></span>
                            <span class="descr" title="">	<p>Список номеров, основной номер<br />
Список номеров, который есть у клиента с возможность выбрать номер и совершить звонок<br />
<a href="https://i.imgur.com/MeHOHfo.png" rel="thumbnail" title=""><img src="https://i.imgur.com/MeHOHfo.png" style="width: 100px;"></a></p>

	<h3><span style="color:RebeccaPurple;">Основной номер</span></h3>

	<p>При входящем звонке, в селекте номер1 (с которого идет звонок) отмечается как основной (конкретно сейчас,т.е. при входящем звонке с другого номера, номера2, в селекте номер1 будет как обычный, а номер2 как основной).</p>

	<p><strong>Основной номер клиента, сотрудника</strong><br />
Для клиентов это поле seq в exist_client_phones. Для сотрудников ещё телефоны могут лежать теоретически в contacts_contacts с entity_type = &#8216;staff_contacts&#8217; &#8211; они будут не основными. В seq по идее либо 1, либо null должно быть. Мы проверяем на истину или ложь. null и 0 будут ложь, остальные &#8211; истина.</p>

	<p><strong>Как заполняется поле seq? Какие действия приводят к тому, что в БД появляется запись?</strong></p>

<pre><code>Это не у нас происходит, где-то в РИЕСЕ, не помню я... (ответ главного разработчика системы OmniLead)
</code></pre>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32832" parent="32304">
                    <input class="ds" type="hidden" name="sort[32832]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32832" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Создание заявки">Создание заявки</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32828" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32828]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32828" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32828</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32828/show">	<p>Создание заявки</p>

</a></span>
                            <span class="descr" title="">	<p>Прежде всего необходимо сначала присвоить категорию. Только после этого кнопка Создать заявку будет доступна для клика.<br />
Далее для создания заявки нужны личные данные клиента: номер телефона или(и) email.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32911" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32911]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32911" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32911</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32911/show">	<p>Статусы заявки, отображение в КК</p>

</a></span>
                            <span class="descr" title="">	<p>Цвет заявки в списке, сортировка</p>

	<h3> <span style="color:MediumVioletRed;">Цвет заявки по ее статусу</span></h3>

	<p>Разделять блоки согласно цветовой схеме:
	<ul>
		<li>В работе &#8211; Зеленый</li>
		<li>Отложена &#8211; Желтый</li>
		<li>Закрыта &#8211; Красный</li>
	</ul></p>

	<h3> <span style="color:MediumVioletRed;">Список заявок: сортировка</span></h3>

	<p>Сортировать заявки по следующему алгоритму:
	<ul>
		<li>&#8220;В работе&#8221; и &#8220;отложена&#8221; от новой к старой</li>
		<li>&#8220;Закрыта&#8221; от новой к старой</li>
	</ul></p>

	<p><a href="https://i.imgur.com/TGLaoxQ.png" rel="thumbnail" title=""><img src="https://i.imgur.com/TGLaoxQ.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32913" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32913]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32913" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32913</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32913/show">	<p>Заявки в <span class="caps">CRM</span></p>

</a></span>
                            <span class="descr" title="">	<p>Какие заявки работают в <span class="caps">CRM</span>, РИЕС</p>

	<h3> <span style="color:MediumVioletRed;">Цвет заявки по ее статусу</span></h3>

	<p>В <span class="caps">CRM</span> есть заявки следующих типов: Купить Продать, Снять, Сдать новостройка.<br />
Создавая заявку в РИЕС (4 вышеуказанных типа) она создается в <span class="caps">CRM</span> и наоборот, также они синхронятся между собой.</p>

	<p>Если создать заявку другого типа, то она прилетит в <span class="caps">CRM</span>, РИЕС, но в <span class="caps">CRM</span> она будет отображаться некорректно и нельзя будет изменить ее статус.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32968" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32968]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32968" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32968</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32968/show">	<p>Дубли и заявки</p>

</a></span>
                            <span class="descr" title="">	<p>После удаления всех контактов у клиента могут быть заявки. </p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32907" parent="32304">
                    <input class="ds" type="hidden" name="sort[32907]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32907" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Иконки">Иконки</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-folder" folder="true" id="32919" parent="32907">
                    <input class="ds" type="hidden" name="sort[32919]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32919" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Город">Город</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32920" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32920]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32920" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32920</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32920/show">	<p>Определение города</p>

</a></span>
                            <span class="descr" title="">	<p>У специалиста и клиента<br />
Город автоматически определяется только у каналов телефонии</p>

	<h3>Звонок от специалиста</h3>

	<p>Город определяется городом офиса работы специалиста.<br />
Таблица users, колонка work_address -&gt; e_offices.city_id (city_id)</p>

	<h3>Звонок от клиента</h3>

	<p>Если звонит клиент, то город определяется по городу канала (Настройки-Каналы и операторы-Телефония-Карандаш-Город)</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32831" parent="32907">
                    <input class="ds" type="hidden" name="sort[32831]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32831" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Категории">Категории</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32830" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32830]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32830" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32830</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32830/show">	<p>Как присвоить категорию</p>

</a></span>
                            <span class="descr" title="">	<p>Можно сделать МД, ИД<br />
Для того, чтобы присвоить категорию нужно в панели телефонии кликнуть на бирку</p>

	<p><a href="https://i.imgur.com/Pzwlj77.png" rel="thumbnail" title=""><img src="https://i.imgur.com/Pzwlj77.png" style="width: 100px;"></a></p>

	<p>Выбрать подкатегорию (также без нее нельзя создать заявку)</p>

	<p><a href="https://i.imgur.com/YOBiBoZ.png" rel="thumbnail" title=""><img src="https://i.imgur.com/YOBiBoZ.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32313" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32313]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32313" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32313</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32313/show">	<p>Категории и подкатегории &#8211; это</p>

</a></span>
                            <span class="descr" title="">	<p>Категория – это всего две группы: целевая, нецелевая<br />
Подкатегории – это множеств групп, каждая принадлежит только одной категории. Подкатегории в системе обозначаются как категории (см. Категории обращений), хранятся в БД <strong>activities_goals</strong><br />
Есть только при активном чекбоксе: <a href="https://i.imgur.com/mu4VP8j.png" rel="thumbnail" title=""><img src="https://i.imgur.com/mu4VP8j.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32908" parent="32907">
                    <input class="ds" type="hidden" name="sort[32908]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32908" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Трубка">Трубка</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32909" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32909]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32909" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32909</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32909/show">	<p>Наличие/отсутствие  иконки</p>

</a></span>
                            <span class="descr" title="">	<p>Условия для совершения звонка</p>

	<p>1. Она есть если у клиента записан номер в карточке клиента<br />
2. Позвонить из диалога можно при привязке номера к оператору<br />
<a href="https://i.imgur.com/aeQHIDQ.png" rel="thumbnail" title=""><img src="https://i.imgur.com/aeQHIDQ.png" style="width: 100px;"></a><br />
3. Когда у оператора есть номер, то выглядит так:<br />
<a href="https://i.imgur.com/hrrJ2Yl.png" rel="thumbnail" title=""><img src="https://i.imgur.com/hrrJ2Yl.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32916" parent="32907">
                    <input class="ds" type="hidden" name="sort[32916]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32916" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Действия с диалогом">Действия с диалогом</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32917" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32917]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32917" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32917</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32917/show">	<p>Передать диалог</p>

</a></span>
                            <span class="descr" title="">	<p>Можно передать либо человеку, либо группе</p>

	<h3> <span style="color:Purple;">Передать диалог оператору</span></h3>

	<p>Оператор может быть не в сети или в сети в любом статусе (отошел/онлайн)</p>

	<h3> <span style="color:Purple;">Передать диалог группе</span></h3>

	<p>В списке кому передать появится группа, лишь при условии, что хотя бы один ее оператор будет в сети</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32835" parent="32304">
                    <input class="ds" type="hidden" name="sort[32835]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32835" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Панель телефонии">Панель телефонии</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32836" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32836]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32836" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32836</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32836/show">	<p>Это шапка в верху диалога</p>

</a></span>
                            <span class="descr" title="">	<p>Внешний вид<br />
<a href="https://i.imgur.com/Gq1jDTz.png" rel="thumbnail" title=""><img src="https://i.imgur.com/Gq1jDTz.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32950" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32950]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32950" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32950</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32950/show">	<p>Звонок на подменный номер</p>

</a></span>
                            <span class="descr" title="">	<p>Максимальное количество номеров, кторые могут быть выведены &#8211; это пять</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32305" parent="32304">
                    <input class="ds" type="hidden" name="sort[32305]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32305" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Работа с контактами">Работа с контактами</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32306" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32306]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32306" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32306</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32306/show">	<p>Отображение контактов и ссылок</p>

</a></span>
                            <span class="descr" title="">	<p>Текст с личными данными (номер телефона, почта, ссылки на профиль) отображаются так:</p>

	<p><a href="https://i.imgur.com/C3sgcSb.png" rel="thumbnail" title=""><img src="https://i.imgur.com/C3sgcSb.png" style="width: 100px;"></a></p>

	<h3>Основные требования:</h3>

	<p>1) Текст подсвечивается синим, есть светло-голубая подсветка-фон <br />
2) Появляется всплывашка для добавления в карточку клиента</p>

	<h4>Распространяется на:</h4>

	<p><b>1) Viber:</b> <br />
viber://chat?number=79026208008<br />
<b>2) Whatsapp:</b><br />
whatsapp://send?phone=79026208008<br />
<b>3) Telegram:</b> <br />
<a href="https://telegram.me/juel1" target=_blank>https://telegram.me/juel1</a><br />
<b>4) Facebook:</b> <br />
<a href="https://facebook.com/juel1" target=_blank>https://facebook.com/juel1</a><br />
<b>5) VK:</b> <br />
<a href="https://vk.com/juel1" target=_blank>https://vk.com/juel1</a><br />
<b>6) OK:</b>  <br />
<a href="https://ok.ru/juel1" target=_blank>https://ok.ru/juel1</a><br />
<b>7) Номер телефона</b> <br />
Любой вид мобильного номера, поддерживает запись через + ()-</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Высокий                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32341" parent="32304">
                    <input class="ds" type="hidden" name="sort[32341]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32341" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Желтушка">Желтушка</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32334" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32334]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32334" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32334</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32334/show">	<p>Чат был особожден</p>

</a></span>
                            <span class="descr" title="">	<p><strong>Освобождение диалога</strong> &#8211; это значит, что диалог сняли с оператора (если выбрана настройка Закреплять оператора за клиентом) и теперь он виден всем операторам. </p>

	<h3><span style="color:Crimson;">Причины освобождения диалога</span></h3>

	<p><strong>в коде:</strong>  <a href="https://git.etagi.com/ries-crm/omni-lead/-/blob/develop/src/Helpers/telephony/methods.js#L701" target=_blank>https://git.etagi.com/ries-crm/omni-lead/-/blob/develop/src/Helpers/telephony/methods.js#L701</a></p>

<pre><code>@//Причины, по которым звонок может быть перемаршрутизирован
reasons = [
        !isHere, //Текущего оператора диалога нет в системе
(Выкинуло, но чаты не перемаршрутизировались например).
        isHere &amp;amp;&amp;amp; !hasNumber &amp;amp;&amp;amp; newState === &#39;ring&#39;, //У текущего оператора диалога нет привязанного 
и это входящий звонок.
        hasNumber &amp;amp;&amp;amp; !freeLine &amp;amp;&amp;amp; newState === &#39;ring&#39;, //У текущего оператора занята линия и
это входящий звонок.
        flags.add.includes(&#39;missed&#39;) &amp;amp;&amp;amp; !update.chat.picked, //Входящий звонок переходит в пропущенные 
(и не был никем подхвачен)
        isHere &amp;amp;&amp;amp; !isOnline &amp;amp;&amp;amp; oldState !== &#39;active&#39; &amp;amp;&amp;amp; newState === &#39;ring&#39;  //Текущий оператор
диалога не в статусе Онлайн, 
диалог был в Новых и это входящий звонок.
      ];
</code></pre>

	<h3> <span style="color:Crimson;">Как это в диалоге выглядит</span></h3>

	<p><a href="https://i.imgur.com/YmKW6Vn.png" rel="thumbnail" title=""><img src="https://i.imgur.com/YmKW6Vn.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32970" parent="0">
                    <input class="ds" type="hidden" name="sort[32970]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32970" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Юла">Юла</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32971" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32971]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32971" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32971</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32971/show">	<p>Инструкция подключения</p>

</a></span>
                            <span class="descr" title=""> <a href="https://youtrack.esoft.tech/issue/OC-3996" target=_blank>https://youtrack.esoft.tech/issue/OC-3996</a>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-folder" folder="true" id="32926" parent="32970">
                    <input class="ds" type="hidden" name="sort[32926]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32926" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Чат сайта">Чат сайта</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="33007" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[33007]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="33007" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">33007</span>
                            <span class="name" title=""><a href="/project/22481/requirement/33007/show">	<p>Селект</p>

</a></span>
                            <span class="descr" title="">	<p>Юла<br />
Для каждого написавшего клиента создаётся два контакта (contacts_contacts):</p>

    youla_id, вида 5ea19e3649f5d068945eb176, уникален для каждого клиента. По этому контакту мы узнаем клиента, если он напишет нам ещё раз.
    youla_chat, вида 5ea19e3649f5d068945eb176-600237fb604172484d228463, то есть идентификатор клиента и идентификатор объявления, разделённые минусом. Этот контакт используется, чтобы понять, по какому именно объявлению обращается клиент и иметь возможность ответить ему.

	<p><a href="https://i.imgur.com/hWg19PP.png" rel="thumbnail" title=""><img src="https://i.imgur.com/hWg19PP.png" style="width: 100px;"></a></p>

	<p>Отображение кракозябрами, потому что эти записи были удалены из omni_contacts_context</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32438" parent="0">
                    <input class="ds" type="hidden" name="sort[32438]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32438" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="История диалогов">История диалогов</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32454" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32454]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32454" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32454</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32454/show">	<p><span style="color:MediumOrchid;">Сообщение по каналу Авито</span></p>

</a></span>
                            <span class="descr" title="">	<p>Неизвестный тип сообщения (system): </p>

	<p><b>Как отображается</b><br />
<a href="https://i.imgur.com/b3k9u8P.png" rel="thumbnail" title=""><img src="https://i.imgur.com/b3k9u8P.png" style="width: 100px;"></a></p>

	<p><strong>Илья, сказал, что</strong></p>

 <em class="big">Это нормально. Так Авито присылает всякие технические сообщения, типа &#8220;Остерегайтесь мошенников и пр.&#8221;</em> 

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="33023" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[33023]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="33023" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">33023</span>
                            <span class="name" title=""><a href="/project/22481/requirement/33023/show">	<p><span class="caps">AVITO</span> красный кружок ошибка рядом со временем</p>

</a></span>
                            <span class="descr" title="">	<p><a href="https://i.imgur.com/fngXvo1.png" rel="thumbnail" title=""><img src="https://i.imgur.com/fngXvo1.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-folder" folder="true" id="32701" parent="32438">
                    <input class="ds" type="hidden" name="sort[32701]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32701" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Сохраненные фильтры">Сохраненные фильтры</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32744" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32744]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32744" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32744</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32744/show">	<p>Принципы работы</p>

</a></span>
                            <span class="descr" title="">	<p>Создание фильтра, работа кнопок, возврат к обычному фильтру</p>

	<h3><span style="color:DarkBlue;">Создание фильтра</span></h3>

	<p>При создании нового фильтра он сразу же принимает значение текущего. Таким образом можно либо сначала создать пустой фильтр, а потом его настроить, либо наоборот &#8211; сначала выбрать нужные параметры, а уже потом создать фильтр с ними.</p>

	<h4><span style="color:SteelBlue;">Создание фильтра через заполненные параметры</span></h4>

	<p><a href="https://i.imgur.com/l0Pu8g7.png" rel="thumbnail" title=""><img src="https://i.imgur.com/l0Pu8g7.png" style="width: 100px;"></a></p>

	<p><em>Фильтр(1)</em> → выбор параметров → <em>Применить</em> → <em>Карандаш(2)</em> → <em>Кнопка-плюс(3)</em> → ввести название фильтра → <em>Создать</em> </p>

	<p><a href="https://i.imgur.com/tuIFEFd.png" rel="thumbnail" title=""><img src="https://i.imgur.com/tuIFEFd.png" style="width: 100px;"></a></p>

	<h4><span style="color:SteelBlue;">Создание пустого фильтра</span></h4>

	<p>Меняется порядок действий:<br />
<em>Карандаш(2)</em> → <em>Кнопка-плюс(3)</em> → ввести название фильтра → <em>Создать</em> → <em>Фильтр(1)</em> → выбор параметров → <em>Сохранить</em> → <em>Сохранить(модалка)</em></p>

	<h3><span style="color:DarkBlue;">Работа кнопок</span></h3>

	<h4><span style="color:Teal;">Очистить</span></h4>

	<p>Кнопка &#8220;Очистить&#8221; не снимает фильтр, а лишь очищает все его параметры (действие, аналогичное ручной очистке каждого поля руками).</p>

	<h4><span style="color:Teal;">Сохранить</span></h4>

	<p>Появляется модалка сохранения</p>

	<h3><span style="color:DarkBlue;">Возврат к обычному фильтру</span></h3>

	<p>Снятие фильтра &#8211; операция в принципе не обязательная (так как ничто не мешает применить фильтр без его сохранения) &#8211; добавлена сюда в качестве бонуса, если кому-то уж совсем будет некомфортно работать.</p>

	<p><em>Карандаш(2)</em> → <em>Кнопка-галка(4)</em></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32702" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32702]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32702" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32702</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32702/show">	<p>Название фильтров</p>

</a></span>
                            <span class="descr" title="">	<p>Фильтры упорядочиваются по названию. Соответственно после смены имени порядок может измениться.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32745" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32745]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32745" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32745</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32745/show">	<p>Окно управления телом фильтром</p>

</a></span>
                            <span class="descr" title="">	<p>Кнопки Сохранить, Применить, Отмена по клику Фильтр</p>

	<h3><span style="color:DarkBlue;">Создание фильтра</span></h3>

	<p><a href="https://i.imgur.com/VJ7Uzeg.png" rel="thumbnail" title=""><img src="https://i.imgur.com/VJ7Uzeg.png" style="width: 100px;"></a></p>

	<p>Заголовок окна при выбранном фильтре<br />
кнопка &#8220;Сохранить&#8221; при выбранном фильтре<br />
кнопки &#8220;Применить&#8221; и &#8220;Сохранить&#8221; активны только, когда изменения не применены или не сохранены &#8211; соответственно</p>

	<p>1) Сохранить<br />
Кнопка &#8220;Сохранить&#8221; активна тогда, когда сохранённый в базу фильтр отличается от того, что сейчас вбито в фильтр на экране. </p>

	<p>2) &#8220;Отмена&#8221; <br />
Кнопка &#8220;Отменить&#8221; приводит фильтр в состояние на момент открытия и закрывает окно &#8211; она больше связана с кнопкой &#8220;Применить&#8221; по сути. Т.е. теперь не просто закрывает окно управления фильтром, но и возвращает параметры в исходное состояние.</p>



</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32684" parent="32438">
                    <input class="ds" type="hidden" name="sort[32684]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32684" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Кнопка Фильтр - Фильтрация">Кнопка Фильтр - Фильтрация</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32439" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32439]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32439" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32439</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32439/show">	<p>Клиенты</p>

</a></span>
                            <span class="descr" title="">	<p>Как происходит фильтрация<br />
<strong>Особенности сайджеста:</strong></p>

	<ol>
		<li>выводятся и клиенты, и сотрудники</li>
		<li>могут быть клиенты и сотрудники, по выбору которых будет заглушка с котиком</li>
		<li>имя клиента, которого не было вообще в системе, не должно появляться в списке вариантов</li>
	</ol>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">1</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32445" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32445]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32445" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32445</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32445/show">	<p>Категории</p>

</a></span>
                            <span class="descr" title="">	<p>Как происходит фильтрация<br />
<strong>Особенности сайджеста:</strong><br />
1) выводятся активные и неактивные категории КЦ пользователя</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32450" parent="0">
                    <input class="ds" type="hidden" name="sort[32450]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32450" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Панель супервайзера">Панель супервайзера</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32492" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32492]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32492" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32492</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32492/show">	<p>Длительность диалога</p>

</a></span>
                            <span class="descr" title="">	<p>Считается от времени подхвата</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32451" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32451]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32451" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32451</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32451/show">	<p>Поиск</p>

</a></span>
                            <span class="descr" title="">	<p><b>Поиск идёт по:</b><br />
1) ID диалога<br />
2) ПОЛНОМУ имени клиента<br />
3) Имени оператора (отображаемому)<br />
4) Названию канала<br />
5) Категориям (для вкладки В работе)</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32457" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32457]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32457" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32457</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32457/show">	<p>Группы</p>

</a></span>
                            <span class="descr" title="">	<p>Один канал может быть только в одной группе</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">1</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32746" parent="0">
                    <input class="ds" type="hidden" name="sort[32746]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32746" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Статистика">Статистика</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-folder" folder="true" id="32780" parent="32746">
                    <input class="ds" type="hidden" name="sort[32780]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32780" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Общие элементы">Общие элементы</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32747" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32747]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32747" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32747</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32747/show">	<p>Блок управления фильтрами</p>

</a></span>
                            <span class="descr" title="">	<p>Находится в правом верхнем углу. При открытии страницы в селекторе всегда выбран пункт &#8220;Все каналы&#8221;.</p>

	<p><a href="https://i.imgur.com/yCx6fT8.png" rel="thumbnail" title=""><img src="https://i.imgur.com/yCx6fT8.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32751" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32751]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32751" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32751</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32751/show">	<p>После создания фильтра</p>

</a></span>
                            <span class="descr" title="">	<p>Он сразу же применяется</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32785" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32785]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32785" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32785</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32785/show">	<p>Фильтры по КЦ</p>

</a></span>
                            <span class="descr nodescr">Нет описания</span>                            <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-folder" folder="true" id="32749" parent="32780">
                    <input class="ds" type="hidden" name="sort[32749]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32749" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Диалоговое окно создания нового фильтра">Диалоговое окно создания нового фильтра</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32750" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32750]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32750" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32750</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32750/show">	<p>Кнопка &#8220;+&#8221;</p>

</a></span>
                            <span class="descr" title="">	<p>Открывает диалоговое окно создания нового фильтра:</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32748" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32748]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32748" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32748</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32748/show">	<p>Внешний вид и поля</p>

</a></span>
                            <span class="descr" title="">	<p>Поля: обязательные, тип (текст, мультиселект)</p>

	<h4>Поля
<a href="https://i.imgur.com/8DDISFA.png" rel="thumbnail" title=""><img src="https://i.imgur.com/8DDISFA.png" style="width: 100px;"></a></h4>

	<p>Название и каналы &#8211; поля обязательные к заполнению</p>

	<p>Название  &#8211; текстовое поле, Каналы &#8211; мультиселект</p>

	<h4>Каналы
<a href="https://i.imgur.com/kWUX06h.png" rel="thumbnail" title=""><img src="https://i.imgur.com/kWUX06h.png" style="width: 100px;"></a>
<a href="https://i.imgur.com/vM9MZUP.png" rel="thumbnail" title=""><img src="https://i.imgur.com/vM9MZUP.png" style="width: 100px;"></a></h4>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32752" parent="32780">
                    <input class="ds" type="hidden" name="sort[32752]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32752" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Редактирование фильтра">Редактирование фильтра</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32753" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32753]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32753" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32753</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32753/show">	<p>Карандаш</p>

</a></span>
                            <span class="descr" title="">	<p>При выбранном фильтре рядом с ним отображается иконка &#8220;карандашик&#8221;, при нажатии на которую открывается окно редактирования фильтра:</p>

	<p><a href="https://imgur.com/a/iG3ujAq" rel="thumbnail" title=""><img src="https://imgur.com/a/iG3ujAq" style="width: 100px;"></a></p>

	<p>Окно практически идентично окну создания фильтра + имеется кнопка удаления</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32761" parent="32746">
                    <input class="ds" type="hidden" name="sort[32761]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32761" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Онлайн-режим">Онлайн-режим</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32763" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32763]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32763" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32763</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32763/show">	<p>Нагрузка по чатам на 1 оператора</p>

</a></span>
                            <span class="descr" title="">	<p>Количество чатов / на количество операторов</p>

	<p>Считаются только чаты (т.е. без звонков)</p>

	<p>Статусы операторов значения не имеют. Просто берутся все чаты, где operator_id &gt; 0 и считается по н</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32762" parent="32746">
                    <input class="ds" type="hidden" name="sort[32762]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32762" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Очередь обращений">Очередь обращений</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-folder" folder="true" id="32765" parent="32762">
                    <input class="ds" type="hidden" name="sort[32765]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32765" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Операторы телефонии">Операторы телефонии</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32781" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32781]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32781" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32781</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32781/show">	<p>Иконки операторов</p>

</a></span>
                            <span class="descr" title="">	<p>Зеленый, желтый, красный</p>

	<p>Зеленый &#8211; оператор может взять звонок<br />
Желтый &#8211; есть телефонный диалог В работе<br />
Красный &#8211; в телефонном диалоге идет разговор</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32764" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32764]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32764" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32764</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32764/show">	<p>Сортировка операторов</p>

</a></span>
                            <span class="descr" title="">	<p>Распределение входящих обращений влияет на сортировку свободных операторов телефонии. При интеллектуальном распределении сортируются по нагрузке, при ином &#8211; по времени последнего назначения.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32766" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32766]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32766" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32766</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32766/show">	<p>В списке только операторы</p>

</a></span>
                            <span class="descr" title="">	<p>Те, у кого, номер + статус онлайн</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32782" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32782]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32782" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32782</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32782/show">	<p>Последнее назначение</p>

</a></span>
                            <span class="descr" title="">	<p>Отсчёт ведётся от поля last_finished_call в omni_operators_load. А пишется оно, когда завершается диалог с каналом телефонии.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32514" parent="0">
                    <input class="ds" type="hidden" name="sort[32514]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32514" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Настройки">Настройки</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-folder" folder="true" id="32604" parent="32514">
                    <input class="ds" type="hidden" name="sort[32604]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32604" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Входящие обращения">Входящие обращения</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32918" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32918]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32918" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32918</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32918/show">	<p>Переадресовывать звонки от сотрудников на номер</p>

</a></span>
                            <span class="descr" title="">	<p><strong>1. Работает только если вводить номер с 7.</strong> <br />
При вводе номера с 8, значение можно ввести, оно сохранится, но звонок специалиста будет сбрасываться (у него) и соответственно не долетает до омни.</p>

	<p><strong>2. Если включена переадресация на оператора, то при звонке специалиста, он не отображается в системе</strong><br />
Звонок идет прямиком в аппарат, в системе не отображается, трубка оператора красная. При поступлении прямого звонка на софтфон оператора звонок идёт мимо нас.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32811" parent="32514">
                    <input class="ds" type="hidden" name="sort[32811]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32811" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Распределение входящих обращений">Распределение входящих обращений</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32605" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32605]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32605" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32605</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32605/show">	<p>Матрица загруженности</p>

</a></span>
                            <span class="descr" title="">	<p>Это &#8211; установки приема обращений по типам каналов<br />
<a href="https://i.imgur.com/hAxSbBM.png" rel="thumbnail" title=""><img src="https://i.imgur.com/hAxSbBM.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32812" parent="32514">
                    <input class="ds" type="hidden" name="sort[32812]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32812" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Без распределения">Без распределения</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32817" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32817]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32817" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32817</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32817/show">	<p>Когда берешь чат в работу</p>

</a></span>
                            <span class="descr" title="">	<p>Появляется желтушка: Оператор Имя оператора (его id) взял диалог в работу<br />
<a href="https://imgur.com/2MBCrcf" rel="thumbnail" title=""><img src="https://imgur.com/2MBCrcf" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32515" parent="32514">
                    <input class="ds" type="hidden" name="sort[32515]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32515" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Контакт-центры">Контакт-центры</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-folder" folder="true" id="32650" parent="32515">
                    <input class="ds" type="hidden" name="sort[32650]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32650" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Новые операторы">Новые операторы</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32523" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32523]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32523" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32523</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32523/show">	<p>Технические моменты</p>

</a></span>
                            <span class="descr" title="">	<p>1) Технически процедуры добавления/удаления/обновления пользователя абсолютно одинаковы &#8211; выполняется синхронизация ролей и настроек с РИЕС. Отличается только визуализация кнопки, в зависимости от случая.</p>

	<p>2) Процедура синхронизации включает в себя заполнение данных в таблицах accounts_accounts, accounts_account_role и accounts_account_settings. К слову &#8211; при нажатии на &#8220;Удалить&#8221; не происходит удаления данных из этих таблиц, просто у пользователя пропадают роли Омни.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32516" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32516]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32516" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32516</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32516/show">	<p>ID через запятую</p>

</a></span>
                            <span class="descr" title="">	<p>Поле ввода принимает ID пользователей РИЕС, разделённые запятой.<br />
<a href="https://i.imgur.com/EW3sQb3.png" rel="thumbnail" title=""><img src="https://i.imgur.com/EW3sQb3.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32517" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32517]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32517" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32517</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32517/show">	<p>Кнопка Загрузить</p>

</a></span>
                            <span class="descr" title="">	<p>После нажатия на &#8220;Загрузить&#8221; подгружается информация об этих пользователя<br />
<a href="https://i.imgur.com/wxAk5QG.png" rel="thumbnail" title=""><img src="https://i.imgur.com/wxAk5QG.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32518" parent="32515">
                    <input class="ds" type="hidden" name="sort[32518]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32518" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="После нажатия кпопки Загрузить">После нажатия кпопки Загрузить</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32519" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32519]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32519" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32519</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32519/show">	<p>Удалить</p>

</a></span>
                            <span class="descr" title="">	<p>Он есть в Омни, но в РИЕС у него нет ролей Омни (omni_operator, omni_supervisor, omni_admin). Такое могло произойти, если оператор был у нас когда-то, а потом у него убрали роль Омни в РИЕС, но после чего он ещё ни разу не авторизовывался в Омни. В этом случае напротив пользователя появляется кнопка &#8220;Удалить&#8221;.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32520" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32520]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32520" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32520</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32520/show">	<p>Добавить</p>

</a></span>
                            <span class="descr" title="">	<p>Его нет в Омни, но в РИЕС у него есть роли Омни. В этом случае напротив пользователя появляется кнопка &#8220;Добавить&#8221;, после нажатия на которую пользователь появится в списке операторов в блоке выше (если процедура синхронизации пройдёт успешно).</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32522" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32522]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32522" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32522</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32522/show">	<p>Роли не найдены</p>

</a></span>
                            <span class="descr" title="">	<p>Его нет в Омни и у него нет ролей Омни в РИЕС. В этом случае делать с пользователем нечего и просто выводится уведомления &#8220;роли не найдены&#8221;</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32521" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32521]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32521" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32521</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32521/show">	<p><span style="color:Chartreuse;">Обновить</span></p>

</a></span>
                            <span class="descr" title="">	<p>Изменить, кнопки нет, выдача только текста</p>

	<p>Он есть в Омни и у него есть роли Омни в РИЕС. В этом случае напротив него появляется кнопка &#8220;Обновить&#8221;, позволяющая обновить роли. Например, когда оператор становится супервайзером.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32783" parent="32515">
                    <input class="ds" type="hidden" name="sort[32783]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32783" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="После смены КЦ">После смены КЦ</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32784" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32784]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32784" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32784</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32784/show">	<p>Диалоги оператора</p>

</a></span>
                            <span class="descr" title="">	<p>Оператор имеет диалоги в КЦ1 и переходит в КЦ2.<br />
Диалоги переходят с оператором в КЦ2, но принадлежат КЦ1, соответственно при завершении пойдут в ИД КЦ1, а на ПС и в Статистике КЦ2 они не будут отображаться.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32648" parent="32514">
                    <input class="ds" type="hidden" name="sort[32648]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32648" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Прочие">Прочие</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32649" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32649]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32649" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32649</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32649/show">	<p>Номер для исходящих вызовов</p>

</a></span>
                            <span class="descr" title="">	<p>Исходящий номер для КЦ настраивается в разделе &#8220;Прочие&#8221;<br />
Если выбрано значение &#8220;По умолчанию&#8221;, то будет использоваться номер 73452512222 и транк spice  (<a href="https://git.etagi.com/ries-crm/omni-lead/-/blob/develop/config/main.js#L198)," target=_blank>https://git.etagi.com/ries-crm/omni-lead/-/blob/develop/config/main.js#L198),</a>если для канала не будет настроено иное значение:</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32552" parent="0">
                    <input class="ds" type="hidden" name="sort[32552]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32552" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Телефония">Телефония</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-folder" folder="true" id="32460" parent="32552">
                    <input class="ds" type="hidden" name="sort[32460]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32460" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Оператор">Оператор</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32461" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32461]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32461" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32461</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32461/show">	<p>Статус В сети/Отошел при смене КЦ</p>

</a></span>
                            <span class="descr" title="">	<p>Если оператор был в сети, когда ему сменили КЦ, то после обновления страницы, он должен остаться в сети и наоборот<br />
Примечание: работает не всегда</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32704" parent="32552">
                    <input class="ds" type="hidden" name="sort[32704]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32704" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Софтфон">Софтфон</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32555" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32555]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32555" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32555</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32555/show">	<p>Формат номеров операторов</p>

</a></span>
                            <span class="descr" title="">	<p>1XXX, 5XXX, 0YYXXXX<br />
0YYXXXX &#8211; это формат<br />
0YY &#8211; код региона (ГИБДД)<br />
<span class="caps">XXXX</span> &#8211; порядковый номер<br />
Условно в Тюмени будет 0721234</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32655" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32655]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32655" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32655</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32655/show">	<p>Может позвонить сотрудник, клиент, оператор</p>

</a></span>
                            <span class="descr" title="">	<p>В системе звонки курируют между тремя категориями лиц: клиенты, операторы, специалисты (сотрудники). </p>

	<h3><span style="color:Crimson;">Оператор</span></h3>

	<p>Оператор отличается от специалиста тем, что номер оператора зарегистрирован в системе. Т.е. оператором может быть только человек в омни (с правами на омни). А специалистом может быть кто угодно, чей номер есть в таблице риеса в users.</p>

	<p><strong>Номер телефона:</strong> только короткий номер, подробнее см. Формат номеров операторов.<br />
<em>Примечание:</em>  См. Номер оператора зарегистрирован в системе.</p>

	<h3> <span style="color:Crimson;">Специалист или сотрудник</span></h3>

	<p>Специалист не может быть оператором. Он может никогда в жизни не узнать, что в Этажах есть такая система Омни. Кто может быть специалистом? Например, риелтор в Урюпинске, ипотечник, юрист, программист. Иначе говоря, это сотрудник Этажей.</p>

	<p><strong>Номер телефона:</strong> может быть короткий номер, длинный (обычный номер), может быть и тот, и тот</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32658" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32658]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32658" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32658</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32658/show">	<p>Номер оператора зарегистрирован в системе</p>

</a></span>
                            <span class="descr" title="">	<p>Это когда введен номер телефона (софтфон, поле ввода под статусом), который принадлежит оператору.</p>

	<p><a href="https://i.imgur.com/OSfJ3ug.png" rel="thumbnail" title=""><img src="https://i.imgur.com/OSfJ3ug.png" style="width: 100px;"></a></p>

	<h3><span style="color:SteelBlue;">Особенности работы номера у оператора и сотрудника</span></h3>

	<p>Например, <strong>номер зарегистрирован в системе, т.е. за ним стоит оператор_2.</strong> Если ты в разговоре с клиентом переведешь звонок на этот номер, да ещё и не слепым переводом, а нормальным, то звонок переведется на О2.</p>

	<p>Если <strong>номер не зарегистрирован в системе</strong>, и при этом прописан в users у какого-то пользователя/специалиста, то при переводе разговора с клиентом это будет обычный перевод специалисту. </p>

	<p>Если предположить, что такое возможно: короткий номер не на операторе и не в users, то это клиент.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32705" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32705]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32705" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32705</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32705/show">	<p>Исходящие: выбор и сохранение номера</p>

</a></span>
                            <span class="descr" title="">	<p>Сохранение выбранного номера для исходящих звонков (индивидуально) </p>

	<h3><span style="color:DarkBlue;">Где посмотреть?</span></h3>

	<p>Выбранный номер (точнее идентификатор из таблицы omni_caller_ids) сохраняется в настройки аккаунта (accounts_account_settings). Имя настройки &#8211; omni_selected_callerid</p>

	<h3><span style="color:DarkBlue;">Вопросы</span></h3>

	<p><strong>1. Сохранить можно только один номер</strong><br />
<em>Вопрос:</em> У пользователя, если он сменит КЦ, он же может сохранить номер1 в КЦ1, номер2 в КЦ2, и при смене КЦ быть с выбранным номером?</p>

	<p><em>Ответ:</em> В текущей реализации не может. Если он сменит КЦ и выберет новый номер &#8211; настройка перезапишется.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32672" parent="32552">
                    <input class="ds" type="hidden" name="sort[32672]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32672" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Исходящие">Исходящие</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32671" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32671]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32671" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32671</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32671/show">	<p>Типы исходящих</p>

</a></span>
                            <span class="descr" title="">	<p>Часть 1: софтфон</p>

	<h3><span style="color:LightSlateGrey;">Существует четыре типа исходящих:</span></h3>

	<p>1) из софтфона<br />
2) из диалога<br />
3) перевод на сотрудника<br />
4) прозвоны </p>

	<h3><span style="color:DarkBlue;">Софтфон</span></h3>

	<h5><span style="color:SteelBlue;">Канал исходящего</span></h5>

	<p>Когда совершается исходящий звонок из софтфона,то канал по которому он идет определяется в Настройках → Прочие → Системные настройки → Канал для исходящих вызовов <sup>выбор: канал1</sup>. Канал по умолчанию это канал с тегом outgoing, который где-то но должен быть, если не в этом КЦ, то в другом. Соответственно исходящий из КЦ1 может проходить через канал КЦ2. </p>

	<h5><span style="color:SteelBlue;">Номер исходящего</span></h5>

	<p>Номер для исходящего может быть разным. Прежде всего он определяется через выбор на софтфоне, над кнопкой вызова.<br />
<a href="https://i.imgur.com/td5LsUB.png" rel="thumbnail" title=""><img src="https://i.imgur.com/td5LsUB.png" style="width: 100px;"></a><br />
Выбор на софтфоне &#8211; это список номеров, который принадлежит КЦ, его можно изменить в БД (<a href="https://chlist.sitechco.ru/project/22481/requirement/32644/show">ссылка на требование про БД</a>). Тут есть два варианта: выбор номера либо Использовать номер канала. </p>

	<p>Выбор номера, тут все ясно. </p>

	<h5><span style="color:SteelBlue;">Использовать номер канала</span></h5>

	<p>Следующий выбор Использовать номер канала, он задается Настройках → Каналы и операторы → Телефония → канал1 → Редактировать → Исходящий номер.</p>

	<p>Там также есть выбор номера, и еще Использовать номер контакт-центра.</p>

	<h5><span style="color:SteelBlue;">Использовать номер контакт-центра</span></h5>

	<p>Он задается в Настройках → Прочие → Системные настройки → Номер для исходящих вызовов. Номер по умолчанию &#8211; это номер: 73452212222. Это царь номер Этажей.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Высокий                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32673" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32673]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32673" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32673</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32673/show">	<p>Типы исходящих</p>

</a></span>
                            <span class="descr" title="">	<p>Часть 2: из диалога</p>

	<h3><span style="color:LightSlateGrey;">Существует четыре типа исходящих:</span></h3>

	<p>1) из софтфона<br />
2) из диалога<br />
3) перевод на сотрудника<br />
4) прозвоны </p>

	<h3><span style="color:DarkBlue;">Звонок из диалога</span></h3>

	<p>Он совершается через кнопку вызова в диалоге <a href="https://i.imgur.com/rOxFxJj.png" rel="thumbnail" title=""><img src="https://i.imgur.com/rOxFxJj.png" style="width: 100px;"></a></p>

	<h5><span style="color:SteelBlue;">Канал исходящего</span></h5>

	<p>Исходящий из диалога идет по каналу диалога.</p>

	<h5><span style="color:SteelBlue;">Номер исходящего</span></h5>

	<p>Номер канала или номер КЦ если: 1) звонок будет проходить не через канал телефонии 2) звонок идет через канал телефонии, а в его настройках стоит Использовать номер контакт &#8211; центра.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32674" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32674]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32674" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32674</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32674/show">	<p>Типы исходящих</p>

</a></span>
                            <span class="descr" title="">	<p>Часть 3: Звонок специалисту и прозвоны Риес</p>

	<h3><span style="color:DarkBlue;">Звонок специалисту</span></h3>

	<p>Речь прежде всего про звонок специалисту из софтфона во время диалога, т.е. перевод звонка на специалиста. Потому что если делать просто исходящий из софтфона, то правила поведения точно такие же как и у обычного звонка, единственное отличие &#8211; это вторая категория для сотрудника (первая &#8211; это категория исходящего). </p>

	<h5><span style="color:SteelBlue;">Канал исходящего</span></h5>

	<p>Исходящий идет по каналу диалога.</p>

	<h5><span style="color:SteelBlue;">Номер исходящего</span></h5>

	<p>Выбор идет аналогично исходящего из софтфона: номер из софтфона → номер канала → номер КЦ → дефолтный номер</p>

	<h3><span style="color:DarkBlue;">Прозвоны Риес</span></h3>

	<h5><span style="color:SteelBlue;">Канал исходящего</span></h5>

	<p>Канал может быть как в самом КЦ, так и в другом.</p>

	<h5><span style="color:SteelBlue;">Номер исходящего</span></h5>

	<p>Номер будет меняться в зависимости от КЦ. При звонке специалистом, находящимся в КЦ1, звонящим через канал КЦ2, номер исходящего будет от КЦ1 (выбранным в настройках). Номер определяеся геолокацией (КЦ) оператора.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32786" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32786]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32786" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32786</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32786/show">	<p>Иерархия номера исходящего звонка</p>

</a></span>
                            <span class="descr" title="">	<p>Иерархия назначения номера для исходящих вызовов.</p>

	<p><strong>Старая иерархия:</strong></p>

	<ul>
		<li>Выбранный из списка номер.</li>
		<li>Номер канала (если это перезвон &#8211; номер входящего канала, если просто исходящий &#8211; номер канала исходящих вызовов данного КЦ).</li>
		<li>Номер КЦ канала.</li>
	</ul>

	<p><strong>Новая иерархия:</strong></p>

	<ul>
		<li>Выбранный из списка номер.</li>
		<li>Номер КЦ оператора.</li>
	</ul>

	<p>Таким образом из иерархии исключается влияние номера КЦ канала.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32553" parent="32552">
                    <input class="ds" type="hidden" name="sort[32553]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32553" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Принципы работы">Принципы работы</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32342" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32342]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32342" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32342</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32342/show">	<p>Статусы звонка</p>

</a></span>
                            <span class="descr" title="">	<p>1) Переадресован <a href="https://i.imgur.com/dqF0kAR.png" rel="thumbnail" title=""><img src="https://i.imgur.com/dqF0kAR.png" style="width: 100px;"></a><br />
2) Пропущен <a href="https://i.imgur.com/kvbHjuw.png" rel="thumbnail" title=""><img src="https://i.imgur.com/kvbHjuw.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32556" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32556]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32556" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32556</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32556/show">	<p>Слепой перевод</p>

</a></span>
                            <span class="descr" title="">	<p>Есть звонок у оператора О1, он хочет соединить с оператором О2, то он набирает номер О2 в софтфоне, нажимает на Перевести звонок и может завершить звонок разговор до того, как О2 возьмет трубку &#8211; это называется слепым переводом. </p>

	<p>При слепом переводе диалог не переходит к О2, а остается у О1, будто это перевод на специалиста.</p>

	<p>Если при входящем при слепом переводе клиент сбрасывает, приходит второй лишний hangup вместе с record</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32594" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32594]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32594" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32594</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32594/show">	<p>Сброс оператора, программно</p>

</a></span>
                            <span class="descr" title="">	<p>Чеклисты Алены</p>

	<h3><span style="color:Crimson;">О1 сбрасывает О2</span> </h3>

	<p>О1 в софтфоне нажимает на красную кнопку, завершая разговор с О2</p>

	<p><a href="https://i.imgur.com/j53EYZo.png" rel="thumbnail" title=""><img src="https://i.imgur.com/j53EYZo.png" style="width: 100px;"></a></p>

	<h3><span style="color:Crimson;">О1 сбрасывает программно</span> </h3>

	<p>О1 на панели телефонии нажимает зеленую кнопку, завершая разговор с клиентом</p>

	<p><a href="https://i.imgur.com/PuAnSf7.png" rel="thumbnail" title=""><img src="https://i.imgur.com/PuAnSf7.png" style="width: 100px;"></a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32743" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32743]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32743" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32743</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32743/show">	<p>Начало звонка</p>

</a></span>
                            <span class="descr" title="">	<p>Желтушка Идет дозвон</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32972" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32972]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32972" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32972</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32972/show">	<p>Виртуальноый (отрицательный id) контакта</p>

</a></span>
                            <span class="descr" title="">	<p>Виртуального (с отрицательным id) контакта для данного сотрудника</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32642" parent="32552">
                    <input class="ds" type="hidden" name="sort[32642]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32642" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Технические стороны">Технические стороны</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32554" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32554]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32554" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32554</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32554/show">	<p><span style="color:MediumOrchid;">Пропадают кнопки Автоподхвата/Отклонения, исчезает диалог</span></p>

</a></span>
                            <span class="descr" title="">	<p>После обновления страницы несколько раз</p>

	<h3><span style="color:Crimson;">Причины освобождения диалога</span></h3>

	<p>1. Идет звонок<br />
<strong>ФР:</strong> Диалог появляется в новых<br />
после второго обновления страницы , когда есть звонок, <br />
2. Обновить страницу дважды<br />
<strong>ФР:</strong> Кнопки автоподхвата/отклонения пропадают и звонок тоже, а со стороны клиента говорят &#8220;все операторы заняты&#8221; &#8211; и это все на протяжении 40 сек, а потом звонок, кнопки все возвращается в нормальное положение. В диалоге при этом появляется сообщение &#8220;Звонок отклонён автоматически&#8221; (см. ПС)<br />
_________________________</p>

	<h3><span style="color:Crimson;">Причины освобождения диалога</span></h3>

	<p>Это не странность. Это защита от зависания операторского интерфейса. При включенном автоподхвате после назначения звонка на кого-то, бэк-энд даёт некоторое время, чтобы фронт отправил команду на подхват звонка. Если этого не происходит, срабатывает автоотклонение звонка для этого оператора, чтобы диалог мог перейти следующему. Так как у тебя в системе скорее всего больше нет свободных операторов &#8211; клиенту проигрывается &#8220;все операторы заняты&#8221;</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-folder" folder="true" id="32819" parent="32642">
                    <input class="ds" type="hidden" name="sort[32819]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32819" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Телефония">Телефония</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32644" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32644]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32644" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32644</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32644/show">	<p>omni_caller_ids</p>

</a></span>
                            <span class="descr" title="">	<p>Хранение всех исходящих номеров (и транков)</p>

	<p>Поля:<br />
1) caller_id &#8211; собственно номер (поле не может быть пустым).<br />
2) trunk &#8211; транк (если значение пустое &#8211; будет взято верхнее по уровню: транк КЦ &#8211; если пуст транк канала, дефолтный транк &#8211; если пуст транк КЦ).<br />
3) contact_center_id &#8211; ID контакт-центра<br />
4) cities &#8211; массив ID городов, в которых действует данный номер &#8211; перспектива на будущее для прозвонов, сейчас не используется (поле не может быть пустым, но есть дефолтное значение {}).<br />
5) active &#8211; видимость в селекторе для операторов &#8211; перспектива на будущее, сейчас не используется (поле не может быть пустым, но есть дефолтное значение false).</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32821" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32821]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32821" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32821</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32821/show">	<p>omni_calls</p>

</a></span>
                            <span class="descr" title="">	<p>Таблица активных звонков</p>

	<p><strong>Для справки:</strong> если выполнить запрос чтения строк из omni_calls: <code>SELECT * FROM omni_calls</code>, то также вернутся все записи из omni_calls_stat &#8211; такова особенность наследования таблиц в Postgres. Чтобы получить строки только таблицы omni_calls, необходимо добавить ключевое слово <span class="caps">ONLY</span>: <code>SELECT * FROM ONLY omni_calls</code></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32822" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32822]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32822" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32822</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32822/show">	<p>omni_calls_stat</p>

</a></span>
                            <span class="descr" title="">	<p>Таблица завершенных звонков, наследованная от omni_calls</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="33003" parent="32642">
                    <input class="ds" type="hidden" name="sort[33003]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="33003" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="БД Юла">БД Юла</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="33004" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[33004]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="33004" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">33004</span>
                            <span class="name" title=""><a href="/project/22481/requirement/33004/show">	<p>omni_contacts_context</p>

</a></span>
                            <span class="descr" title="">	<p>Юла<br />
Для каждого объявления создаётся запись в omni_contacts_context с информацией об объекте в объявлении, которая затем подгружается в шапку переписки (при выбранном контакте)</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32820" parent="32642">
                    <input class="ds" type="hidden" name="sort[32820]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32820" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Общие БД">Общие БД</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32833" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32833]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32833" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32833</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32833/show">	<p>chat_items</p>

</a></span>
                            <span class="descr" title="">	<p>operator_id = -1, last_message <span class="caps">NULL</span></p>

	<h4>operator_id = -1</h4>

	<p>происходит когда нет ни одного оператора в КЦ</p>

	<h4>Заполнение last_message </h4>

	<p>1) Когда в messages_items добавляется новое нетехническое (text, attachment) сообщение. </p>

	<p>2) Если income, то берётся значение date_delivered, иначе date_sent. </p>

	<p>3) Откладывание диалога</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="33005" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[33005]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="33005" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">33005</span>
                            <span class="name" title=""><a href="/project/22481/requirement/33005/show">	<p>contacts_contacts</p>

</a></span>
                            <span class="descr" title="">	<p>Все соцсети (Юла, сайт, телеграмм, вайбер, &#8230;)</p>

	<h3>Юла</h3>

	<p>Для каждого написавшего клиента создаётся два контакта (contacts_contacts):</p>

	<p>*youla_id, </p>

	<p>вида 5ea19e3649f5d068945eb176, уникален для каждого клиента. По этому контакту мы узнаем клиента, если он напишет нам ещё раз.</p>

	<p>*youla_chat, </p>

	<p>вида 5ea19e3649f5d068945eb176-600237fb604172484d228463, то есть идентификатор клиента и идентификатор объявления, разделённые минусом. Этот контакт используется, чтобы понять, по какому именно объявлению обращается клиент и иметь возможность ответить ему.</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32826" parent="32642">
                    <input class="ds" type="hidden" name="sort[32826]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32826" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Софтфон">Софтфон</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32645" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32645]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32645" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32645</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32645/show">	<p>Методы телефонии</p>

</a></span>
                            <span class="descr" title="">	<p>Dial и SP_Dial Исходящие это вроде </p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32825" parent="32642">
                    <input class="ds" type="hidden" name="sort[32825]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32825" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="консоль">консоль</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32646" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32646]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32646" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32646</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32646/show">	<p>trunk и callerid &#8211; на исходящий идут</p>

</a></span>
                            <span class="descr nodescr">Нет описания</span>                            <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32647" parent="32642">
                    <input class="ds" type="hidden" name="sort[32647]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32647" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Запросы на звонки">Запросы на звонки</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32823" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32823]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32823" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32823</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32823/show">	<p>hangup &#8211; завершение звонка</p>

</a></span>
                            <span class="descr nodescr">Нет описания</span>                            <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32824" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32824]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32824" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32824</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32824/show">	<p>pending &#8211; чего-то ждет</p>

</a></span>
                            <span class="descr" title="">	<p>1. Когда нет автоподхвата и происходит исходящий из софтфона</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32651" parent="32552">
                    <input class="ds" type="hidden" name="sort[32651]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32651" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Желтушки телефонии">Желтушки телефонии</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32652" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32652]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32652" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32652</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32652/show">	<p>Звонок завершен</p>

</a></span>
                            <span class="descr" title="">	<p>Появляется <br />
1) после окончания разговора клиентом<br />
2) когда исходящий звонок оператора клиент сбросил<br />
3) когда оператор начал звонить, но сбросил аппаратно трубку</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32653" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32653]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32653" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32653</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32653/show">	<p>Вы положили трубку</p>

</a></span>
                            <span class="descr" title="">	<p>Только когда оператор завершил звонок программо</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32340" parent="0">
                    <input class="ds" type="hidden" name="sort[32340]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32340" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Инструкции тестирования">Инструкции тестирования</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32437" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32437]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32437" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32437</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32437/show">	<p>Написать как сотрудник в чат</p>

</a></span>
                            <span class="descr" title="">	<p>Способы как это сделать
	<ol>
		<li>Прописать на клиентской стороне cookie ries-user-id с идентификатором РИЕС</li>
		<li>Через тестовую сборку мобильного чата</li>
		<li>Создание сайтового чата на страницах  ИД и ПС</li>
	</ol></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32914" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32914]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32914" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32914</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32914/show">	<p>Стать специалистом (звонок)</p>

</a></span>
                            <span class="descr" title="">	<p>Чтобы стать специалистом, в таблице users<br />
записать номер в одно из полей: phone, work_phone (можно в два)<br />
interoffice_telephone &#8211; для короткого номера, вмещает только короткий</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32440" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32440]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32440" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32440</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32440/show">	<p>Написать как сотрудник: создание чата</p>

</a></span>
                            <span class="descr" title="">	<p><strong>1.</strong> Cоздать сайтовый чат, взять код, вставить в файл pages/app.html в сторадже, только должно быть с кавычками async=true -&gt; async=&#8220;true&#8221;</p>

	<p><a href="https://i.imgur.com/QPY9C6w.png" rel="thumbnail" title=""><img src="https://i.imgur.com/QPY9C6w.png" style="width: 100px;"></a></p>

	<p><strong>2.</strong> В компонентах ext/src/PageApp/PageApp.js в обоих случаях поставить &#8216;block&#8217;</p>

	<p><a href="https://i.imgur.com/z39Z7dJ.png" rel="thumbnail" title=""><img src="https://i.imgur.com/z39Z7dJ.png" style="width: 100px;"></a></p>

	<p><strong>2</strong>.* Еще может быть проблема в настройках чата в поле site<br />
у меня site:  <a href="https://chat.esoft.tech" target=_blank>https://chat.esoft.tech</a></p>

	<p><strong>ИТОГ:</strong> Чат будет на страницах app, например ИД</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32526" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32526]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32526" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32526</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32526/show">	<p>Удаление сотрудника из ОМНИ</p>

</a></span>
                            <span class="descr" title="">	<p>accounts_account_role<br />
accounts_account_settings<br />
accounts_dashboards<br />
accounts_accounts</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-folder" folder="true" id="32741" parent="32340">
                    <input class="ds" type="hidden" name="sort[32741]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32741" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Postman">Postman</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32551" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32551]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32551" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32551</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32551/show">	<p>Подключение Infobib (Viber, Whatsapp)</p>

</a></span>
                            <span class="descr" title="">	<p><span style="color:Chartreuse;">Написать инструкцию</span></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32636" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32636]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32636" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32636</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32636/show">	<p>Отправка сообщений через постман</p>

</a></span>
                            <span class="descr" title=""> <a href="https://youtrack.esoft.tech/issue/OC-3642" target=_blank>https://youtrack.esoft.tech/issue/OC-3642</a>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32742" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32742]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32742" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32742</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32742/show">	<p>Прозвоны РИЕС</p>

</a></span>
                            <span class="descr" title=""> <a href="https://youtrack.esoft.tech/issue/SuppRies-16354" target=_blank>https://youtrack.esoft.tech/issue/SuppRies-16354</a>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32508" parent="32340">
                    <input class="ds" type="hidden" name="sort[32508]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32508" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Изменения перед тестированием">Изменения перед тестированием</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32509" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32509]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32509" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32509</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32509/show">	<p>Чтобы заявки прилетали как у людей</p>

</a></span>
                            <span class="descr" title="">	<p>Вот эту строку закомментируй &#8211; будут заявки нормально создаваться: <br />
<a href="https://git.etagi.com/ries-crm/esoft.service.deals/-/blob/develop/app/Handlers/DealsServiceHandler.php#L655" target=_blank>https://git.etagi.com/ries-crm/esoft.service.deals/-/blob/develop/app/Handlers/DealsServiceHandler.php#L655</a></p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32335" parent="32340">
                    <input class="ds" type="hidden" name="sort[32335]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32335" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Особые люди из компании">Особые люди из компании</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32338" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32338]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32338" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32338</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32338/show">	<p>id 325</p>

</a></span>
                            <span class="descr" title="">	<p>Только ID</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32336" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32336]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32336" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32336</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32336/show">	<p>id 14</p>

</a></span>
                            <span class="descr" title="">	<p>Только ID и специальность, работает</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32337" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32337]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32337" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32337</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32337/show">	<p>id 323</p>

</a></span>
                            <span class="descr" title="">	<p>Есть ФИО, специальность, уволен</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
        
                            <li class="drag s-folder" folder="true" id="32441" parent="32340">
                    <input class="ds" type="hidden" name="sort[32441]" value=""/>
                    <div class="header no-bb">
                        <input class="checkbox" id="32441" type="checkbox">
                        <span class="toggle"><span title="Свернуть папку" class="icon"></span></span>
                        <span class="name nwrp" title="Лайфхаки">Лайфхаки</span>
                        <span class="more"><img class="arrow" alt="" src="/img/arrow.png"></span>
                        <span class="items">
                                                        <span class="popup-toggle itm addreq">Новое требование</span>                            <span class="popup-toggle itm importreq">Импортировать требования</span>                            <span class="popup-toggle itm adddir">Создать подпапку</span>                            <span class="popup-toggle itm renamedir">Переименовать</span>
                                                    </span>
                    </div>
                    <ol>
                        <li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>
                        
                            <li class="drag s-chlist" folder="false" id="32660" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32660]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32660" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32660</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32660/show">	<p>Удобное создание текста в ситечке</p>

</a></span>
                            <span class="descr" title=""> <a href="https://borgar.github.io/textile-js/" target=_blank>https://borgar.github.io/textile-js/</a>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32442" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32442]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32442" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32442</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32442/show">	<p>Если нужно на бою написать клиентом, который уже заведен в системе</p>

</a></span>
                            <span class="descr" title="">	<p>Чтобы не шокировать каждый раз операторов, можно сначала возобновить диалог из ИД и потом уже писать в существующий чат</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
        
                            <li class="drag s-chlist" folder="false" id="32447" day="" mounth="" year="">
                    <input class="ds" type="hidden" name="sort[32447]" value=""/>
                    <div class="cl">
                        <label>
                            <span class="cb"><input id="32447" project_id="22481" type="checkbox" class="my_checklists" /></span>
                            <span class="abbr">32447</span>
                            <span class="name" title=""><a href="/project/22481/requirement/32447/show">	<p>Включить запросы на бою</p>

</a></span>
                            <span class="descr" title="">	<p><span class="caps">DEV</span>_MODE = 1</p>

</span> <!-- // #6871 -->
                                                        <span class="prgrs">
                                Средний                            </span>
                            <span class="cnt">0</span>
                        </label>
                    </div>
                </li>  
               
                            </ol>
                </li>
               
                            </ol>
                </li>
               
                </ol><!-- END: ol.sortable  -->
    </div> <!-- END: div.folder.root  -->
</div> <!-- END: div#main  -->
<!-------------------------------------->
<form id="req_form_data" action="#" method="post" onsubmit="return false;"> 
    <div id="req_form" class="popup-overlay" style="display:none;" >
        <div class="popup">       
            <div class="popup-header">
                <img height="16" width="16" src="/img/icons/document--plus.png" />
                <span>Создание нового требования</span>
            </div>
            <div class="popup-content" style="padding: 10px 18px;">
                <div class="popup-row"><div class="gray-info-title" style="line-height: 17px; width: 380px;">
                    Для создания нескольких требований сразу воспользуйтесь функцией импорта или нажмите <span class="key">Shift</span> + <span class="key">Enter</span> после готовности требования.                    </div></div>
                <div class="popup-row">
                    <div class="inline top" style="margin-right: 10px">
                        <div class="small-label">Название <span style="color: red;">*</span></div>
                        <input style="width: 400px;" class="block" type="text" id="req_form-name" name="name" value="" placeholder="Введите имя" maxlength="100" />
                    </div>
                </div>
                <div class="popup-row">
                    <div class="small-label">Описание</div>
                    <textarea style="width: 400px;" class="block" id="req_form-description" name="description" placeholder="Введите описание требования"  maxlength="3000"></textarea>
                </div>
                    <input type="hidden" id="parent_req" name="parent" value="0" />
                <div class="popup-row">
                    <div class="inline top" style="margin-right: 10px;">
                        <div class="small-label inline">Приоритет</div>
                        <!--<select style="width: auto;" class="block" id="popup-cl-type" name="priority">
                            <option value="3">Высокий</option>
                            <option value="2" selected>Средний</option>
                            <option value="1">Низкий</option>
                        </select>-->
                        <div style="margin-top: 5px;" id="add-req-prior-input">
                            <label class="small-label inline top"><input name="priority" type="radio" value="3" /> Высокий</label>
                            <label class="small-label inline top"><input name="priority" type="radio" value="2" checked /> Средний</label>
                            <label class="small-label inline top"><input name="priority" type="radio" value="1" /> Низкий</label>
                        </div>
                    </div>
                </div>
                <div class="popup-row" style="margin-top: 15px;">
                    <div id="button_add" type="button" class="btn blue inline">Создать</div>
                    <div id="button_add_proceed" type="button" class="btn blue inline">Создать и продолжить</div>
                    <div id="button_cancel" type="button" class="popup-close btn blue inline">Закрыть</div>
                </div>
            </div>
        </div>
    </div>
 </form>
<!-------------------------------------->
<div id="req_import_form_data" >
    <div id="req_import_form" class="popup-overlay" style="display:none;" >
        <div class="popup">       
            <div class="popup-header">
                <img height="16" width="16" src="/img/icons/document--plus.png" />
                <span>Импортировать требования</span>
            </div>
            <div class="popup-content">
                <input type="hidden" id="import_parent_req" name="parent" value="0" />
                <div class="popup-row">
                    <div class="small-label">Выбрать каталог или требование:</div>
                    <input id="import_parent_name" style="width: 370px; padding: 4px 5px;" type="text" readonly="readonly" value="Корневой каталог" />
                    <input id="import_parent_id" type="hidden" value="0" />
                    <div class="btn gray inline top" onclick="$('#requirement-dialog').dialog('open');
                        getattached(getArrayId().join(','), $(this), add_root_folder = true); 
                        log('Пользователь запросил список требований из окна импорта');
                        ">...</div>
                </div>
                <div class="popup-row">
                    <div class="small-label inline">Требования</div>
                    <textarea id="import" name="import" required="required"></textarea>
                </div>
                <div class="popup-row">
                    <div style="width: 430px; font-size: 11px; font-style: italic;">Каждая строка должна содержать одну информацию по одному требованию. Имя, описание требования и приоритет должны быть разделены табами. Приоритет может содержать следующие значения: 1 - Низкий, 2 - Средний, 3 - Высокий.</div>
                </div>
                <div class="popup-row" style="margin-top: 15px;">
                    <button id = "startImportButton" class="btn blue" onclick="startImport();">Сохранить</button>
                    <span class="popup-close btn gray" id="button_cancel" onclick="$('#requirement-dialog').dialog('close');">Отмена</span>
                </div>              
            </div>
        </div>
    </div> 
 </div>
<!-------------------------------------->
<form id="dir_form_data" action="#" method="post">
    <div id="dir_form" class="popup-overlay" style="display:none;" >
        <div class="popup">       
            <div class="popup-header">
                <img height="16" width="16" src="/img/icons/document--plus.png" />
                <span>Создать подпапку</span>
            </div>
            <div class="popup-content">
                <div class="popup-row">
                    <input type="hidden" class="parent_req" name="parent" value="0" />
                    <div class="inline top" style="margin-right: 10px">
                        <div class="small-label">Название <span style="color: red;">*</span></div>
                        <input class="block" type="text" id="dir_form-name" name="name" value="" placeholder="Введите имя" maxlength="100" required />
                    </div>
                </div>
                <div class="popup-row">
                    <button class="btn blue">Создать</button>
                    <span class="popup-close btn gray" id="button_cancel">Отмена</span>
                </div>              
            </div>
        </div>
    </div> 
 </form>
<!-------------------------------------->
<form id="rename_form_data" action="#" method="post">
    <div id="rename_form" class="popup-overlay" style="display:none;" >
        <div class="popup">       
            <div class="popup-header">
                <img height="16" width="16" src="/img/icons/folder-rename.png" />
                <span>Переименовать папку</span>
            </div>
            <div class="popup-content">
                <div class="popup-row">
                    <input type="hidden" name="id" id="req_id" value="0" />
                    <div class="inline top" style="margin-right: 10px">
                        <div class="small-label">Название <span style="color: red;">*</span></div>
                        <input class="block" type="text" id="rename_form-name" name="name" value="" placeholder="Введите имя" maxlength="100" required />
                    </div>
                </div>
                <div class="popup-row">
                    <button class="btn blue">Сохранить</button>
                    <span class="popup-close btn gray" id="button_cancel">Отмена</span>
                </div>              
            </div>
        </div>
    </div>   
 </form>


<div class="contextMenu" id="menu">
      <ul>
        <li id="cm_open"><img src="/img/cp/cc/black/png/folder_open_icon16.png" alt="" /> Открыть</li>
                <li id="cm_edit"><img src="/img/cp/cc/black/png/doc_edit_icon16.png" alt="" /> Редактировать</li>
        <li id="cm_delete"><img src="/img/cp/cc/black/png/trash_icon16.png" alt="" /> Удалить</li>
              </ul>
</div>

<div id="req_edit">
</div>


<style>
ol.sortable .placeholder { height: 1px; background: #00aff0; }
ol.sortable .ui-nestedSortable-error { }
ol.sortable label { font-weight: normal; font-size: 12px; }
ol.sortable, ol.sortable ol { margin: 0; padding: 0; list-style-type: none; }
ol.sortable { border: 1px solid #e5e5e5; }
ol.sortable li.nodrag { padding-left: 10px; height: 30px; line-height: 30px; font-size: 12px; color: #aaa; }
ol.sortable li div { }
ol.sortable li.s-folder { padding: 10px; }
ol.sortable div.header + ol { border: 1px solid #e5e5e5; min-height: 30px; }

#requirement-dialog, .ui-dialog { padding: 0; }
#requirement-dialog { background: #fff; }
#requirements-list { padding: 5xp; background: #fff; }
.requirement { font-size: 12px; padding: 4px; }
.requirement:hover, .tree-folder-header:hover { background: #f0f0f0; }
.requirement-name { margin-right: 5px; max-width: 230px; }
.requirement-name a:hover { color: #00aff0; text-decoration: underline; }
.requirement-name a:focus { outline: none; }
.requirement-count { color: #888; }
.tree { padding: 5px; }
.tree-folder { }
.tree-folder-header { cursor: pointer; padding: 4px; }
.tree-folder-header.open { font-weight: bold; }
.tree-folder-expand {
    vertical-align: bottom;
    display: inline-block;
    height: 16px;
    width: 16px;
    background-position: center;
    background-image: url(/images/expand_plus.gif);
}
.tree-folder-expand.open { background-image: url(/images/expand_minus.gif); }
.tree-folder-icon {
    vertical-align: bottom;
    display: none;
    height: 16px;
    width: 16px;
    background-position: center;
    background-image: url(/img/icons/folder-horizontal.png);
}
.tree-folder-icon.open { background-image: url(/img/icons/folder-horizontal-open.png); }
.tree-folder-name { display: inline-block; }
.tree-folder-body { margin-left: 18px; display: none; }
.tree-folder-body.open { display: block; }
.tree-req-count { color: #777; font-size: 12px; }
.popup-overlay { z-index: 1000; }
.popup-row a { color: #00aff0; text-decoration: underline; }
.popup-row a:hover { text-decoration: none; }
</style>

<!-------------------------------------->
<script type="text/javascript">
$(function() {

//$('.s-chlist').each(function(){
//    text = $(this).find('span.descr ul li:first').text().trim(' ')
//    reg = /((http|https|mailto):\S+)/g;
//    text = text.replace(reg,'<a href="$1">$1<\/a>');
    //console.log(text);
//    $(this).find('span.descr ul').html("&bull; " + text);
//})

$('.s-chlist').each(function(){
    num=0;
    text = $(this).find('span.descr ol li:first').text().trim(' ')
    reg = /((http|https|mailto):\S+)/g;
    text = text.replace(reg,'<a href="$1">$1<\/a>');
    $(this).find('span.descr ol').html(++num +'. ' + text);
}) 
   
    

    //try{//error
   
   initCountSymbol([
       'req_form-name',
       'req_form-description',
       'dir_form-name',
       'rename_form-name'
   ]);
    
$('#requirement-dialog').dialog({
    width: 300,
    autoOpen: false,
    resizable: false
});

$('.tree-folder-header').click(function() {
    if($(this).next('.tree-folder-body').hasClass('open')) {
        $(this).removeClass('open');
        $(this).next('.tree-folder-body').removeClass('open');
        $(this).children('.tree-folder-expand, .tree-folder-icon').removeClass('open');
    }
    else  {
        $(this).addClass('open');
        $(this).next('.tree-folder-body').addClass('open');
        $(this).children('.tree-folder-expand, .tree-folder-icon').addClass('open');
    }
});

initDND();


    //}catch(e){

   // }

    $('div.header + ol').each(function() { 
        if($(this).children().size() > 1)
            $(this).children('.nodrag').fadeOut(0);
    });
    
    $('.addreq').live('click', function () {
        $('#req_form input[type=text], textarea').val('');
        
        
        parent = getCheckedFolder();
        log('Форма добавления требования в папку');
        console.log(parent);
        
        if (!parent.length){
            console.log($(this).closest('.s-folder'));
            parent = $(this).closest('.s-folder');
        }
            
        
        
        
        $('#parent_req').val((parent.length == 0) ? 0 : parent.attr('id'));
        $('#req_form').show();
        $('#req_form-name').focus();
    });

    $('.adddir').live('click', function () {
        $('#dir_form input, textarea').val('')
        //parent = $(this).closest('.s-folder');
        var parent = getCheckedFolder();
        
        if (!parent.length){
            console.log($(this).closest('.s-folder'));
            parent = $(this).closest('.s-folder');
        }
        parent.find('div.emptyFolder').parent().remove();
        
        $('.parent_req').val((parent.length == 0) ? 0 : parent.attr('id'));
        $('#dir_form').show();
        $('#dir_form-name').focus();
    });

    $('.renamedir').live('click', function () {
        $('#req_id').val($(this).closest('.s-folder').attr('id'));
        $('#rename_form-name').val($(this).parent().prev().prev().text());
        $('#rename_form').show();
        $('#rename_form-name').focus();
    });

    //rename dir
    $('#rename_form_data').on('submit', function () {
        
        if (!$('#rename_form-name').val().trim(' ')){
            jError('Название не может быть пустым или состоять из пробелов','Ошибка');
            return false;
        }
        
        $('#rename_form').hide();
        $.ajax({
            type: "POST",
            dataType: "json",
            global: false,
            data: $('#rename_form_data').serialize(),
            url: '/project/22481/requirement/rename',
            //beforeSend: function(){},
            success: function(data) {
               //if(data.status == 'ok') {}
                $.msgbox({text:'<b>The folder is renamed successfully!!</b><br />',className:'notice'});
                $('#'+$('#req_id').val() + ' .name:eq(0)').text($('#rename_form-name').val())
                //location.reload(true);
            }
        });
        return false;
        setSort();
    });
    
    var keys = { enter: false, shift: false };
        
   $(document).keydown(function(event){
   if ($('#req_form:visible').length){
       if(event.keyCode == 13) keys.enter = true;     
       if(event.keyCode == 16) keys.shift = true;
        
       if(keys.shift && keys.enter) {
        addReqAjax();
        $('#req_form-name').focus();
       }
   }
    
   });     
        
    $('#req_form:visible').live('keydown', function(event) { 
        if(event.keyCode == 13) keys.enter = true;     
        if(event.keyCode == 16) keys.shift = true;
        
        if(keys.shift && keys.enter) {
            addReqAjax();
            $('#req_form-name').focus();
        }
    });
    
    $('#req_form:visible').live('keyup', function(event) {    
        if(event.keyCode == 13) keys.enter = false;     
        if(event.keyCode == 16) keys.shift = false;
    });
    
    //add
    $('#button_add:visible, #button_add_proceed:visible').live('click', function () {
        
        field_error = verifyAddReqForm()
            if (field_error.length){
                $(field_error).each(function(){
                    $(this).css('border-color','red').prev().find('span').text('Обязательное поле').effect("pulsate", { times:2 }, 500);
                });
                return false;
            }else{
                $('#req_form-name').css('border-color','#E5E5E5').prev().find('span').text('*');
            }
        
        if($(this).attr('id') == 'button_add'){
                $('#req_form').hide(); 
        }
            
  
        addReqAjax();
        $('#req_form-name').focus();
    });
    
    function getCheckedFolder(){
        return $('input.checkbox:checked:last').closest('li.s-folder');
    }
    
    function verifyAddReqForm(){
        if ($('#req_form-name').val() != ''){
            return [];
        }else{
            return [$('#req_form-name')];
        }
    }

    function addReqAjax() {
        
        
        keys.enter = false; 
        keys.shift = false;
        
        if($('#req_form-name').val() == '') {
            $.msgbox({ text: '<b>Ошибка</b><br />Название не может быть пустым или состоять из пробелов', className: 'error', fixed: true });
            return false;
        }
        
        $.ajax({
            type: "POST",
            dataType: "json",
            global: false,
            data: $('#req_form_data').serialize(),
            url: '/project/22481/requirement/add',
            //beforeSend: function(){},
            success: function(data) {
                //if(data.status == 'ok') {}
                if(data.parent!='') {
                    description = '<span class="descr nodescr">Нет описания</span>';
                    
                    if (data.descr != ''){
						/*window.temporaryP = document.createElement('p'); // #6871
						temporaryP.innerHTML = data.descr;*/
                        description = ' <span class="descr">'+data.descr+' </span>'
                        //delete temporaryP;
                    }
                    
                    $('#'+data.parent+' ol:eq(0)').append('<li year="" mounth="" day="" id="'+data.id+'" folder="false" class="drag s-chlist new">'+
                        '<input type="hidden" value="0" name="sort['+data.id+']" class="ds">'+
                        '<div class="cl new"> <label> <span class="cb"> <input type="checkbox"  class="my_checklists" project_id="22481" id="'+data.id+'"> </span>'+
                        ' <span class="abbr">'+ data.id +'</span>'+
                        ' <span title="" class="name"> <a href="/project/22481/requirement/'+data.id+'/show">'+data.name+'</a></span>'+
                        description +
                        ' <span class="prgrs">'+data.priority+'</span><span class="cnt">0</span></label></div></li>');
                    $('#'+data.parent+' ol:eq(0)').find('.small-label').hide()
                    $('.nodrag>div').parent().remove()//пусто
                    $('li.noitem').remove();
                    
                    $('li.new:last input').focus();
                    $.msgbox({text:'<b>Уведомление</b><br />Новое требование успешно создано.',className:'notice'});
                    $('#req_form-name').focus();
                    initDND();
                    setSort();
                    $('#0 input[type="checkbox"]').attr('checked', false);
                }else $.msgbox({text:'<b>Ошибка</b><br />Произошла неизвестная ошибка.',className:'error',fixed:true});
            }
        });
    $('#req_form-name').val('');
        $('#req_form-description').val('');
        $('#add-req-prior-input input[name=priority][value=2]').attr('checked', 'checked');
        $('#req_form-name').focus();

        setSort();
    }

    //IMPORT
    $('#req_import_form_data').on('submit', function () {
        $('#req_import_form').hide();
        $.ajax({
            type: "POST",
            dataType: "json",
            global: false,
            data: $('#req_import_form_data').serialize(),
            url: '/project/22481/requirement/import',
            //beforeSend: function(){},
            success: function(data) {
               window.location.reload();
           }
        });
        return false;

        setSort();
    });

    //add dir
    $('#dir_form_data').on('submit', function () {
        $('#dir_form').hide();
        $.ajax({
            type: "POST",
            dataType: "json",
            global: false,
            data: $('#dir_form_data').serialize(),
            url: '/project/22481/requirement/add',
            //beforeSend: function(){},
            success: function(data) {
               //if(data.status == 'ok') {}
               if(data.parent!='') {
                $('li.new').removeClass('new');
                
                level = $('#'+data.parent+' ol:eq(0)').parents('li').length;
                
                $('#'+data.parent+' ol:eq(0)').append('<li parent="0" id="'+data.id+'" folder="true" class="drag s-folder new">'+
                        '<input type="hidden" value="0" name="sort['+data.id+']" class="ds">'+
                       '<div class="header no-bb"><input type="checkbox" id="'+data.id+'" class="checkbox">'+
                        '<span class="toggle"><span class="icon" title="Свернуть папку"></span></span>'+
                        '<span title="'+data.name+'" class="name nwrp">'+data.name+'</span><span class="more"><img src="/img/arrow.png" alt="" class="arrow"></span>'+
                        '<span class="items">'+
                        (level<=5?'<span class="popup-toggle itm addreq">Новое требование</span>':'')+
                        (level<=5?'<span class="popup-toggle itm importreq">Импортировать требования</span>':'')+
                        (level<5?'<span class="popup-toggle itm adddir">Создать подпапку</span>':'')+
                        '<span class="popup-toggle itm renamedir">Переименовать</span></span>'+
                        '</div><ol>'+
                            '<li class="nodrag"><div class="emptyFolder"><i>Нет вложенных требований.</i> Поэтому папку возможно <span class="convertToReq">преобразовать в обычное требование</span>.</div></li>'+
                        '</ol></li>').find('.more').toggle(
                         function() { $(this).siblings('.items').fadeOut(100); $(this).siblings('.items').fadeIn(100);  },
                         function() { $(this).siblings('.items').fadeIn(100); $(this).siblings('.items').fadeOut(100); }
                        );

                    $('#'+data.parent+' ol:eq(0)').find('.small-label').hide()

                    $.msgbox({text:'<b>Новая папка успешно создана!</b><br />',className:'notice'});
                    $('li.noitem').remove();
                    
                    $('li.new:last input').focus();
                }else $.msgbox({text:'<b>Произошла неизвестная ошибка!</b><br />',className:'error',fixed:true});
               //location.reload(true);
               
               setSort();
               saveSort();
            }
        });
                
        
        return false;


    });
    $('#button_cancel').on('click', function () {
        $('#req_form').hide();
    });

    $('#req_form-name').keyup(function(event) {
        if($(this).val().trim(' ')=='') $(this).val($(this).val().trim(' '));
    });
    
    $('#req_form-name').keypress(function(event) {
      //if (event.which == 32 && ($(this).val()=='' || ($(this).val().length>1 && $(this).val().slice(-1)==' '))) return false;
      //  return true;
    });
    $('#delete_requirement').on('click', function () {
        if ($('#delete_requirement').hasClass('disabled')) return false;

        if($('input:checked').length == 0) {
            jAlert('Вы должны выбрать хотя бы один элемент.','Ошибка');
        } else {
            jConfirm('Вы действительно хотите удалить выделенные объекты?', 'Подтверждение', function(r) {
                if(r) {
                    ids = '';
                    //$('input:checked').closest('li').remove()
                    $('input:checked').closest('li').each(function(i,v){
                        ids+=','+v.id;
                    });

                    $.ajax({
                        type: "POST",
                        dataType: "json",
                        global: false,
                        data: {ids:ids},
                        url: '/project/22481/requirement/delete',
                        beforeSend:function(){
                            $('#delete_requirement').addClass('ajax-loader');
                        },
                        success: function(data) {
                            if(data.status=='ok') {
                                $('input:checked').closest('li').remove();
                                $.msgbox({text:'<b>Уведомление</b><br />Выделенные требования успешно удалены.',className:'notice'});
                                $('#delete_requirement').addClass('disabled').removeClass('blue').removeClass('ajax-loader');
                                $('#span_edit_buttom').addClass('disabled').removeClass('blue').removeClass('ajax-loader');
                            }
                            else
                                $.msgbox({text:'<b>Произошла неизвестная ошибка!</b><br />',className:'error', fixed:true });

                            setSort();
                        }
                    });
                }
            });
        }
    });

    $('input.checkbox').live('click', function (){
        $(this).closest('li,.root').find('input').attr('checked', $(this).attr('checked')?true:false); 
    });

    $('input:checkbox').live('click', function (){
        button_check();
    });
    button_check();
});

function button_check() {
        switch($('input.my_checklists:checked').length) {
            case 0:
                $('#delete_requirement').addClass('disabled').removeClass('blue');
                $('#span_edit_buttom').addClass('disabled').removeClass('blue');
            break;
            case 1:
                $('#delete_requirement').addClass('blue').removeClass('disabled');
                $('#span_edit_buttom').addClass('blue').removeClass('disabled');
            break;
            default:
                $('#delete_requirement').addClass('blue').removeClass('disabled');
                $('#span_edit_buttom').addClass('disabled').removeClass('blue');
            break;
        }
}

</script>
<!-------------------------------------->
<script type="text/javascript">
function import_form_show(parent) {
    $('#req_import_form').show();
    parent = parent | 0;
    $('#import_parent_req').val(parent);
}
$(function() {
    $('.importreq').live('click', function(){
        id = $(this).closest('li').attr('id');
        name = $(this).closest('li').find('span.name:first').text();
        import_form_show(id);
        $('#import_parent_name').val(name);
        $('#import_parent_id').val(id);
        
    });

    $('#import_requirement').live('click', function(){
        import_form_show(0);
        log('Пользователь открыл окно импорта');
    });

    $('#req_import_form textarea').keydown(function(e){
        if(e.keyCode == 9) {
            $(this).val($(this).val() + "\t");
            return false;
        }
    });
    $('.cl').each(function(){ $(this).find('span.descr ul').html("&bull; " + $(this).find('span.descr ul li:first').text().trim(' ')); });
    $('.red').find('a').css('color','#aa0000');
    $('.green').find('a').css('color','#009f00');

    $('div.folder .toggle').toggle(
        function() {
            $(this).parent('.header').addClass('br-bot').next('ol').fadeOut(50);
            $(this).parent('.header').find('.icon').css('background-position', 'left').attr('title', 'Развернуть папку');
            id = $(this).parent().find('input').attr('id');
        },
        function() {
            $(this).parent('.header').removeClass('br-bot').next('ol').fadeIn(50);
            $(this).parent('.header').find('.icon').css('background-position', 'right').attr('title', 'Свернуть папку');
            id = $(this).parent().find('input').attr('id');
    });
   
    $('.span_more_button').click(function(event) {
        event.stopPropagation();
        if($(this).hasClass('blue')) {
            $('#versions').removeClass('active');
            if($('#more-items').hasClass('active'))
                $('.more-submenu, .span_more_button').removeClass('active'); 
            else {
                $('#more-items, .span_more_button').addClass('active');
                $('.span_version_button').removeClass('active');
            }
        }
    });

    $('body').click(function() {
        $('.more-submenu, .span_more_button, .span_version_button').removeClass('active');
    });  

    
    $('#span_edit_buttom').on('click', function() {
        //if(!$('#span_edit_buttom').hasClass('disabled')) {
        //    window.location.href+= '/' + $('.root input:checked').attr('id') + '/show?edit'
        //}
        if ($('#span_edit_buttom').hasClass('disabled')) return false;

        $('#span_edit_buttom').addClass('ajax-loader');
        
        requirement_id = $('.root input:checked').attr('id');
        $.ajax({
            url: '/project/22481/requirement/'+requirement_id+'/editForm?', // #5565
            dataType: 'html',
            beforeSend:function(){
             // $('#span_edit_buttom').addClass('ajax-loader');
            },
            error: function() {
                $('#span_edit_buttom').removeClass('ajax-loader');
                console.log('error');
            },
            success: function(data) {
              $('#span_edit_buttom').removeClass('ajax-loader');
              $("#req_edit").html(data);
              $('#req_editForm').show();
            }
        });
        
    });
    
    
});

    function setSort(){
        i = 1;
        $('input.ds').each(function(){
            $(this).val(i++);
        });
        saveSort();
        console.log($('input.ds'));
    }

    $(function(){
        setSort();

    });

    function saveSort(){
        $.ajax({
            type: "POST",
            dataType: "json",
            global: false,
            data: $('input.ds').serialize(),
            url: '/project/22481/requirement/sortlist',
            success: function(data) {
                log('Порядок сохранен');
            }
        });
    }
    
    function getArrayId(){
        var ids = new Array();
        $('li[id]').each(function(){
            var id = parseInt($(this).attr('id'));
            if (typeof(id)=='number' && !isNaN(id)){
                ids.push(id);   
            }
        });
        return ids;
    }
    
    $('.tree-folder-name').live('click',function(){
        parent_name = $(this).text();
        parent_id = $(this).parent().find('.requirement-attach:first').attr('requirement_id');
        $('#import_parent_name').val(parent_name);
        $('#import_parent_id').val(parent_id);
        $('#requirement-dialog').dialog('close');
    });
    
    $('.tree-children').live('click',function(){
        parent_name = $(this).find('.requirement-name:first').text();
        parent_id = $(this).find('.requirement-attach:first').attr('requirement_id');
        $('#import_parent_name').val(parent_name);
        $('#import_parent_id').val(parent_id);
        $('#requirement-dialog').dialog('close');
    });

function startImport(){
    if ($('#import').val()){
        reload_window = true;
        importRequirement($('#import').val(), $('#import_parent_id').val(), $('#startImportButton'), reload_window);
    } else{
        return $.msgbox({text:'<b>Ошибка</b><br />Поле &quot;Требования&quot; не может быть пустым.',className:'error'})
    }
    
}

function initDND(){


    $('ol.sortable').nestedSortable({maxLevels: 7});
    $('ol.sortable').nestedSortable({
            disableNesting: 's-chlist',
            forcePlaceholderSize: true,
            handle: 'div',
            helper: 'clone',
            items: 'li',
            cancel: '.nodrag',
            maxLevels: 7,
            distance: 20,
            opacity: .7,
            placeholder: 'placeholder',
            revert: 100,
            tabSize: 2000,
            tolerance: 'pointer',
            toleranceElement: '> div',
            start: function () {
                
            },
            stop: function (event, ui) {
                $('div.cl').removeClass('odd').filter(':odd').addClass('odd');
                $('div.header + ol').each(function() { 
                    if($(this).children().size() > 1)
                        $(this).children('.nodrag').fadeOut(0);
                    else
                        $(this).children('.nodrag').fadeIn(0);
                });
                
                //$(this).sortable('cancel');///off
                var id = ui.item.attr('id');
                
                //var dirs = ui.item.parents('.s-folder');
                var parent = 0;
                
                var parent_ = ui.item.parent().closest('.s-folder');
                if(parent_.length > 0) parent = parent_.attr('id')
                //if(dirs.length>0)
                 //   parent = dirs.attr('parent');
                 
                
                level = ui.item.parents('.s-folder').length + ui.item.find('.s-folder').length
                type  = ui.item.hasClass('s-folder') ? 1 : 0
                console.log(level)

                    if(level+type > 7){ 
                        $.msgbox({text:'<b>Уведомление</b><br />Достигнут максимальный уровень вложенности',className:'message',fixed:true});
                        $(this).sortable('cancel');
                        return false;
                    }
    
                    var project_id = $("li.active > a").attr('href');
                    var newsort =  ui.item.prevAll(':visible').length;
                    setSort();
                  $.ajax({
                    type: "POST",
                    dataType: "json",
                    global: false,
                    url: project_id + "/dragndrop",
                    data: { parent: parent,
                        id: id,
                        newsort: newsort },
                     beforeSend: function(){
                    },
                    success: function(data) {
                         if(data==undefined || data.type=="error")
                                $(this).sortable('cancel');
                      }
                  });

                setSort();
                
    }
    });
    
    
    $('li.s-chlist').contextMenu('menu', {
    onShowMenu: function(e, menu) {
        checked = $('ol > li.s-chlist input:checked');
        len = checked.length;
        
        if(len > 0){ 
             $('#cm_open', menu).remove();
             $('#cm_edit', menu).remove();
        }
        
        if ($('li.drag').length)
            return menu;
        else
            return false;
      },
      bindings: {
        'cm_open': function(c) {
            ///project/2049/requirement/16/show
            window.location.href = '/project/22481/requirement/'+c.id+'/show'; // #5565
            //  menu_route( c.id, 'details');
        },
        'cm_edit': function(c) {
           $(c).find('input.my_checklists').attr('checked', true);
           $('#span_edit_buttom').click();
        },
        'cm_delete': function(c) {
            $(c).find('input.my_checklists').attr('checked', true);
            $('#delete_requirement').click();
        }
      },
        menuStyle: {
        width: '170px'
      }   
   });
    
}

$('span.convertToReq').live('click',function(){
    
    folder = $(this).closest('li.s-folder');
    
    console.log(folder);
    name = folder.find('span.name:first').text();
    
    
    jConfirm('Вы действительно хотите преобразовать папку в обычное требование?', 'Подтверждение', function(r) {
        if(r) {
            folder_id = folder.attr('id');

            $.ajax({
                type: "POST",
                dataType: "json",
                global: false,
                data: { id:folder_id },
                url: '/project/22481/requirement/convert',
                success: function(response) {
                    //log('Порядок сохранен');
                    if (response.status != 'success'){
                        $.msgbox({text:'<b>Произошла какая то ошибка.</b><br />',className:'error'});
                        return false;
                    }
                    
                    folder.attr('year','');
                    folder.attr('mounth', '');
                    folder.attr('day','');
                    folder.attr('folder', false);
                    folder.removeClass('s-folder').addClass('s-chlist');
                    
                    req = response.requirement;
                    
                    priority = {'1':'Низкий', '2':'Средний', '3':'Высокий' };
                    
                    class_nodscr = '';
                    
                    if (!req.description){
                        class_nodscr = 'nodescr'
                        req.description = 'Нет описания';
                    }
                   
                    html = '<input class="ds" name="sort['+req.requirement_id+']" value="4" type="hidden">'+
                    '<div class="cl odd">'+
                        ' <label>'+
                            ' <span class="cb"> <input id="'+req.requirement_id+'" project_id="22481" class="my_checklists" type="checkbox"> </span>'+ // #5565
                            ' <span class="abbr">'+req.requirement_id+'</span>'+
                            ' <span class="name" title="'+req.name+'"><a href="/project/22481/requirement/'+req.requirement_id+'/show">'+req.name+'</a></span>'+ // #5565
                            ' <span class="descr '+class_nodscr+'">'+req.description+'</span>'+
                            ' <span class="prgrs">'+priority[req.priority_id]+'</span>'+
                            ' <span class="cnt">'+req.count+'</span>'+
                        ' </label>'+
                    '</div>';
                    
                    folder.html(html);
                    
                    initDND();
                    
                    $('div.cl, ol.sortable .header').removeClass('odd').filter(':odd').addClass('odd');
                    
                    $.msgbox({text:'<b>Папка успешно преобразована в требование!</b><br />',className:'notice'});
                }
            });
        }
    });           
});
</script>
<style>

#requirement-dialog, .ui-dialog { padding: 0; }
#requirement-dialog { background: #fff; }
#requirements-list { padding: 5xp; background: #fff; max-height: 400px; }
#requirement-search { padding: 10px 0 0 10px; border-top: 1px solid #e5e5e5;  }
#requirement-search-input { padding: 3px; width: 260px; }
#requirement-search-button { padding: 5px 16px; position: relative; margin-left: 10px; top: -2px; }
.requirement { font-size: 12px; padding: 4px; }
.requirement:hover, .tree-folder-header:hover { background: #f0f0f0; }
.requirement-name { margin-right: 5px; max-width: 75%; }
.requirement-name a:hover { color: #00aff0; text-decoration: underline; }
.requirement-name a:focus { outline: none; }
.requirement-count { color: #888; }
.requirement-attach {
    cursor: pointer;
    float: right;
    display: inline-block;
    vertical-align: middle;
    width: 16px;
    height: 16px;
}
.is-requirement-attached {
    cursor: pointer;
    width: 16px;
    height: 16px;
    margin-top: 2px;
    display: inline-block;
}
.requirement-attach.pin, .is-requirement-attached.pin { background: url(/img/pin_green.png); background-size: contain; }
.requirement-attach.unpin, .is-requirement-attached.unpin { background: url(/img/pin_gray.png); background-size: contain; }
.is-requirement-attached.ajax-loader { background-image: url(/img/ajax-req-loader.gif); background-size: contain; }
.is-requirement-attached .req-count.pin {
    font-size: 9px;
    box-shadow: inset 0px 1px 1px #CCC;
    border-radius: 4px;
    padding: 1px 3px;
    background: whiteSmoke;
    position: relative;
    left: 20px;
    top: 2px;
    max-width: 25px;
    white-space: nowrap;
}
.is-requirement-attached .req-count.unpin { display: none; }


.tree { padding: 5px; }
.tree-folder { }
.tree-folder-header { cursor: pointer; padding: 4px; }
.tree-folder-header.open { font-weight: bold; }
.tree-folder-expand {
    vertical-align: bottom;
    display: inline-block;
    height: 16px;
    width: 16px;
    background-position: center;
    background-image: url(/images/expand_plus.gif);
}
.tree-folder-expand.open { background-image: url(/images/expand_minus.gif); }
.tree-folder-icon {
    vertical-align: bottom;
    display: none;
    height: 16px;
    width: 16px;
    background-position: center;
    background-image: url(/img/icons/folder-horizontal.png);
}
.tree-folder-icon.open { background-image: url(/img/icons/folder-horizontal-open.png); }
.tree-folder-name { display: inline-block; max-width: 80%; }
.tree-folder-body { margin-left: 18px; display: none; }
.tree-folder-body.open { display: block; }
.tree-req-count { color: #777; font-size: 12px; }

.requirement-attach.pin{
    display:none;
}
</style>
<div id="requirement-dialog" class="dialog" title="Прикрепленные требования">
    <div id="requirements-list">
        <span id="attachlist">
        </span>  
    </div>
</div>

<script type="text/javascript">
    $('#requirement-dialog').dialog({
    width: 300,
    autoOpen: false,
    resizable: false,
    modal: true 
});    
    
$(function(){
    //разворачивалка дерева
    $('.tree-folder-header').live('click',function() {
        if($(this).next('.tree-folder-body').hasClass('open')) {
            $(this).removeClass('open');
            $(this).next('.tree-folder-body').removeClass('open');
            $(this).children('.tree-folder-expand, .tree-folder-icon').removeClass('open');
        }
        else  {
            $(this).addClass('open');
            $(this).next('.tree-folder-body').addClass('open');
            $(this).children('.tree-folder-expand, .tree-folder-icon').addClass('open');
        }
    });

    //откреплялка требований
    $('.requirement-attach.pin').live('click',function(){
        requirement = $(this).parent().parent();
        requirement_id = $(this).attr('requirement_id');
       
        
        log('Пользователь запросил открепление требования ID = '+requirement_id);
        jConfirm("Вы уверены, что хотите открепить требование от теста?", 'Открепление требования', function(r) {
            log('Пользователь подтвердил открепление требования. Открепление требования запущено');
            
            if (!r) return false;
            
            $.ajax({
                type: "POST",
                dataType: "json",
                data: {
                    project_id: 22481,
                    checklist_id: 0,
                    test_id: $('#attachlist').attr('thistestid'),
                    requirement_id: requirement_id
                },
                url: '/project/22481/requirement/unfix',
                beforeSend:function(){
                },
                success: function(data) {
                    if(data.status=='success') {
                        requirement.remove();
                        label = $('tr.test[test_id="'+$('#attachlist').attr('thistestid')+'"]').find('div.req-count')
                        
                        
                        input = $('tr.test[test_id="'+$('#attachlist').attr('thistestid')+'"]').find('input[name="c[rq][]"]');
                        reqs = input.val().split(',');
                        
                        needle = new Array();
                        deleted = new Array();
                        
                        $.each(data.requirement_ids, function(index, id){
                           deleted.push(id); 
                        });
                        
                        $.each(reqs, function(index, id){
                           if (jQuery.inArray(id,deleted ) == -1){
                                console.log('id = ' + id)
                                if (id != '') needle.push(id);
                            } 
                        });

                        if (needle.length){
                            input.val(needle.join(','));
                        }else{
                            input.val('');
                        }
                        
                        console.log(deleted.length);
                        count = label.text()-deleted.length;
                        label.text(count);

                        $.msgbox({text:'<b>Требование успешно откреплено!</b><br />',className:'notice'});
                    }else 
                        $.msgbox({text:'<b>Произошла неизвестная ошибка!</b><br />',className:'error',fixed:true});
                }
            });
            
        });
    });
});    

//смотрелка требований
$('.is-requirement-attached').live('click', function () {
    $(this).addClass('ajax-loader');
    $('#attachlist').attr('thistestid', $(this).attr('testid'))
    getattached($(this).closest('.test').find('input[name="c[rq][]"]').val(), $(this));
});

    function getattached(requirement_ids, button, add_root_folder) {
        $.ajax({
            type: "POST",
            dataType: "json",
            global: false,
            data:     { 
                    requirement_ids: requirement_ids,
                    test: 'get my requirements, please'
                },
            url: '/project/22481/requirement/get',
            beforeSend: function(){
                $('#attachlist').html('');
                $('#attachlist').html('<img class="chitlistloading1" src="/images/loading11.gif" style="padding-left:40px;padding-top:50px;">');
            },
            success: function(data) {
                $('#requirement-dialog').dialog('open');
                $('#attachlist').text('');
                if(data != null){
                    $('#attachlist').html('');
                    
                    tree = $('<div>', { class: 'tree' });
                    console.log(data.length);
                    
                    if (data.length != 0){
                        $.each(data, function (k, r) {
                            if ($(r.children).length){
                                log('Требование ID = ' +r.requrement_id+ ' имеет потомков');                        
                                $(tree).append(getTreeFolder(r));
                            }else{
                                $(tree).append(getTreeChildren(r)); 

                                log('Требование ID = ' +r.requrement_id+ ' не имеет потомков');
                            } 
                        });
                    }else{
                        $(tree).append('<div class="tree-children"><div class="small-label" style="text-align: center;">Нет прикрепленных требований</div></div>');
                    }
                    
                    
                  $('#attachlist').append(tree);
                  
                  if (add_root_folder){
                      addRootItem();
                  }
                  
                  button.removeClass('ajax-loader');
                }else{
                   $('#attachlist').append('<div class="small-label" style="text-align: center;">Нет прикрепленных требований</div>');
                }    

getHeightTreewindow(); //Bug #2756
            }
        });
    }
//Bug #2756
function getHeightTreewindow(){
	var numString = ($("#requirements-list .tree").children().length > 16) ? 16 : $("#requirements-list .tree").children().length;
	//ограничение высоты окна определяется 	#requirements-list { padding: 5xp; background: #fff; max-height: 600px; }
	if(numString < 6) return; // ничего не делаем
	//return $(window).height()/2 - numString*13;
	$('.ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-draggable').css('top', ($(window).height()/2 - numString*14)+ 'px');
	// Позиционируем по вертикали окно выбора требований
}    
//\Bug #2756
  
function getTreeFolder(r){
    var folder = $('<div>', { class: 'tree-folder' });

    // хидер папки
    var folder_header = $('<div>', { class: 'tree-folder-header' }); 
    $(folder_header).append( $('<div>', { class: 'tree-folder-expand' }));
    $(folder_header).append( $('<div>', { class: 'tree-folder-icon' }) );
    $(folder_header).append( $('<div>', { class: 'tree-folder-name nwrp' }).text(r.name) ); 
    $(folder_header).append( $('<div>', { class: 'requirement-attach pin', requirement_id: r.requrement_id }) ); 
    // хидер папки end


    $(folder).append(folder_header);

    var folder_body = $('<div>', { class: 'tree-folder-body' }); 
    //console.log($(items).length);
     $.each(r.children, function(children_id, item){
         if (!$(item.children).length){
             $(folder_body).append(getTreeChildren(item));
         }else{
             $(folder_body).append(getTreeFolder(item)); 
         }

    });

    $(folder).append(folder_header);
    $(folder).append(folder_body);

    return folder;

}

function getTreeChildren(item){
    tree_children = $('<div>', { class: 'tree-children' });

    requirement = $('<div>', { class: 'requirement' });
    span_name = $('<span>', { class: 'requirement-name inline nwrp' }).text(item.name);
    span_count = $('<span>', { class: 'requirement-count' }).text('('+item.count+')');
    span_pin = $('<span>', { class: 'requirement-attach pin', requirement_id: item.requrement_id });
    $(requirement).append(span_name);
    $(requirement).append(span_count);
    $(requirement).append(span_pin);
    $(tree_children).append(requirement);

    return tree_children;
}

function importRequirement(text, parent_id, button, reload){
    $.ajax({
            type: "POST",
            dataType: "json",
            global: false,
            data:     { 
                    parent: parent_id,
                    text: text
                },
            url: '/project/22481/requirement/import',
            beforeSend: function(){
                button.addClass('ajax-loader');
            },
            success: function(data) {
                if (data.status == 'success'){
                    console.log(data.status);
                    if (reload)
                        location.reload();
                }else{
                    $.msgbox({text: data.message,className:'error',fixed:true});
                }
                
            }
        });
}

function addRootItem(){
    root = new Array();
    
    root.push({
        requirement_id : 0,
        name : 'Корневой каталог',
        count : 0,
        children : new Array(),
        description : ''
    });
    
    item_root = getTreeChildren(root[0]);
    
    $('#attachlist div.tree div:first').before(item_root);
}
</script>

        <footer class="black" style="text-align: center;">
      <span style="float: left; padding-left: 10px;">&copy; ООО &laquo;<a href="http://quality-lab.ru" target="_blank">Лаборатория качества</a>&raquo;, 2010-2021</span>
    <img height="13" width="192" src="/img/stcc.png" alt="" style="margin-top: 6px;" />
  <div id="changeWidth" style="cursor:pointer;width:200px;float:right;position:relative;bottom:-7px;"></div>
  <span style="float: right; padding-right: 10px;">Текущая версия: 200416</span>
  
<img  
    src="/img/flag_usa.png"
    onclick="setLang('en_GB')" 
    title="Switch to English version" 
    alt="Switch to English version" 
    style="float: right; margin-right: 5px; vertical-align: text-bottom; cursor: pointer; z-index: 3000;"
    class="switchLang"
/> 
<script>
  function setLang(lang){
    $.ajax({
      type: "POST",
      dataType: 'JSON',
      url: '/language',
      data: { 
          language: lang
      },
      beforeSend: function(){
      },
      success: function(response) {
        if ( response.status == 'success' ){
          //$.msgbox({text:'<b>Уведомление</b><br />'+response.message,className:'notice'});
          //       
                    location.reload();
                      
        }else{
          $.msgbox({text:'<b>Ошибка</b><br />'+response.message,className:'error'});
        }
      }
    });
  }
</script>    <script>
        (function(){var script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.charset = 'utf-8';
        script.src = 'https://152фз.рф/widget/452c528a5467cbd9b186d9a787d60639';
        document.getElementsByTagName('head')[0].appendChild(script);})();
    </script>
    <div style="height: 8px;">
		<div id="fz_wrap" style="color: deepskyblue; height: inherit; margin: -10px;"></div>
	</div>
</footer>

<script>
<!--upbutton-->
$(document).ready(function(){
	var $scroll_back = $('#scroll-back');
	var $bar = $('#left-controlbar');
	$('.bar-desc').css('left', 0);

	var threeshold = 50; // порог полной видимости кнопки при скроллинге
updateTaskCloud()
	$(window)
		/*функция, которая управляет видимостью кнопкинаверх в зависимости от положения полос прокрутки*/
		.scroll(function() {
			var new_opacity = ($(window).scrollTop() < threeshold) ? $(window).scrollTop() / threeshold : 1;
			new_opacity ? $bar.show() : $bar.hide();
			$bar.css({opacity: new_opacity});
			var offset = parseInt($scroll_back.attr('href').substr(1));
			if (new_opacity) {
				$scroll_back.hide();
			} else {
				if (offset) $scroll_back.css({display: 'block', opacity: 0}).animate({opacity: 1}, 'fast');
			}
		})
		.scroll()
		/*связываем событие изменения размеров окна браузера и функцию инициализации кнопок*/
		.resize(initSideControls)
		.resize();

	/*функция для возврата пользователя на место с которого он поднялся вверх*/
	$scroll_back.click(function(e) {
		e.preventDefault();
		$('html, body').animate({scrollTop: $(this).attr('href').substr(1)}, 'normal');
		$(this).attr('href', '#0').hide();
	});
});
<!--\upbutton-->
</script>
</body>
</html>

<script type="text/javascript">
$(function(){
  updateTaskCloud();
});
function updateTaskCloud(){
        $.ajax({
        url: '/project/22481/task/count/my',
        dataType: "html",
        success: function(response){
            console.log(22481);
            console.log(response);
            $('span.user-task-count').replaceWith(response);
        }
    });

    return true;
    }
</script>

<script type="text/javascript">
                    $('a.tracker_url').live('click',function() {
            window.open('https://youtrack.esoft.tech/agiles/95-62/99-23481'+$(this).attr('number'));
        });
                    
    $('.submenu-click').click(function(event) {
        event.stopPropagation();
        $('.submenu-click, .more-submenu').removeClass('active');
        
        $(this).addClass('active');
        $(this).next('.more-submenu').addClass('active'); 
    });
    
    $('html').click(function() {
        $('.submenu-click, .more-submenu').removeClass('active');
    });  

      jQuery(document).ajaxStart(function() {
        $('#loading').css({top: $(window).scrollTop() + 50}).show();
      });
      jQuery(document).ajaxStop(function() {
        $('#loading').hide();
      });
     
//Выдает Куку по имени переменной  
function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) c_end = document.cookie.length;
            return unescape(document.cookie.substring(c_start, c_end));
        }
    }
    return "";
}
 // Создает или устанавливает Куку
 // с_name - имя переменной Куки
 // value - значение
 // expiredays - время жизни
 function setCookie(c_name, value, expiredays, path) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + expiredays);
    document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "": ";expires=" + exdate.toGMTString()) + ((path == null) ? '' : ';path=' + path);
 }

//функция перехода к сортированному списку по клику на проценты
 function openSortedChecklist(project,checklist,result)
 {
 ///project/250/checklist/result/222/details    
 window.location.href = window.location.protocol + '//' + location.host + '/project/' +
                            project + '/checklist/result/' + checklist + '/details' + 
                            '?filter_result_id=' + result; 
 }
 


var thisFolderRename = false;
var thisFolderRenameId = false;
$(function() {
$(".rename_folder").live('click',(function(eventObject){
     $('#rename_folder_form').show();
     thisFolderRename = $(this).parent().prev().prev();
     thisFolderRenameId = $(this).closest('li.drag').attr('parent');
     $('#input_rename_folder').val(thisFolderRename.text());
     $('#input_rename_folder').select()
}))

$("#renamefoldersubmit").live('click',(function(eventObject){
     if($('#input_rename_folder').val().trim(' ')!='')
     {
        $('#rename_folder_form').hide();
        //project/:project_id/checklist/rename/:checklist_run_id
                var name = $('#input_rename_folder').val();
                var project_id = $("li.active > a").attr('href');
                $.post(project_id + "/rename/"+thisFolderRenameId, {
                    name: name
                }, 
                function(data){
                     switch(data.type) {
                        case 'notice':
                            $.msgbox({text:'<b>Уведомление</b><br />'+data.message,className:'notice'});
                            break;
                        case 'error':
                            $.msgbox({text:'<b>Ошибка</b><br />'+data.message,className:'error',fixed:true});
                            break;
                        case 'message':
                            $.msgbox({text:'<b>Уведомление</b><br />'+data.message,className:'message',fixed:true});
                            break;  
                    }
                       
                       
                }, "json");   
                console.log(thisFolderRename)    
                thisFolderRename.text(name);
				thisFolderRename.attr('title',name);
        //$('.rename_folder').eq(1).parent().prev().prev().text('scs')
     }
}))

});




</script>

<div id="rename_folder_form" class="popup-overlay" style="display:none;" >
    <div class="popup">
            <div class="popup-header">
                <img height="16" width="16" src="/img/icons/folder-rename.png" />
                <span>Переименовать папку</span>
            </div>
            <div class="popup-content"> 
                <div class="popup-row confirm">
                    <input type="text" id="input_rename_folder" value=""  maxlength='40' required />
                </div>
                <div class="popup-row" style="text-align: center;">
                    <input type="submit" class="btn blue" value="Переименовать" id="renamefoldersubmit"/>
                    <span class="popup-close btn gray">Отмена</span>
                </div>
            </div>
    </div>
</div>

<script type="text/javascript">
$('#input_rename_folder').keypress(function(event){
	if (event.which == 13) $('#renamefoldersubmit').click();
});

$('#reset_filter').click(function(){
	if (!$('#reset_filter').hasClass('disabled')) location.href=location.href;
});

$(document).keyup(function(e){ 
    if(e.keyCode == 27) {
        $('.popup-overlay:visible, .popup-overlay-noclosable:visible').fadeOut(100);
    }
});


var leftOffset = parseInt($("header#main-header").css('left'));
$(window).bind('scroll resize', function(){
    $('header#main-header').css({
        'left': -$(this).scrollLeft()
    });
});

</script>

	



<script type="text/javascript" src="/js/helper/helper.js"></script>



<!-- Yandex.Metrika counter -->
<script type="text/javascript"> 
(function (d, w, c) { (w[c] = w[c] || []).push(function() {
	try { w.yaCounter43980704 = new Ya.Metrika({
			id:43980704,
			clickmap:true,
			trackLinks:true,
			accurateTrackBounce:true
		}); }
	catch(e) { } });
	var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); };
	s.type = "text/javascript"; s.async = true;
	s.src = "https://mc.yandex.ru/metrika/watch.js";
	if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); }
	else { f(); } })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/43980704" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
